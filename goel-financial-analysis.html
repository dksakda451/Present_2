<!doctype html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8">

		<title>歌尔股份财务分析与成功因素</title>

		<meta name="description" content="歌尔股份财务分析与成功因素演示文稿">
		<meta name="author" content="财务分析团队">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<link rel="stylesheet" href="reveal.js-5.2.1/dist/reset.css">
		<link rel="stylesheet" href="reveal.js-5.2.1/dist/reveal.css">
		<link rel="stylesheet" href="reveal.js-5.2.1/dist/theme/night.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="reveal.js-5.2.1/plugin/highlight/monokai.css">
        
        <!-- Three.js库 -->
        <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
        
        <!-- ECharts库 -->
        <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.6.0/echarts.min.js"></script>
        
        <!-- GSAP动画库 - 直接使用CDN确保加载 -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
        
        <style>
            .threejs-container {
                width: 100%;
                height: 300px;
                position: relative;
                overflow: hidden;
                margin-bottom: 30px;
            }
            
            #threejs-canvas {
                width: 100%;
                height: 100%;
                display: block;
            }
            
            .threejs-loading {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: white;
                font-size: 16px;
                text-align: center;
            }
            
            .echarts-container {
                width: 100%;
                height: 400px;
                margin: 0 auto;
            }
            
            /* GSAP动画容器样式 */
            .gsap-container {
                width: 100%;
                height: 450px;
                position: relative;
                overflow: hidden;
                margin-top: 40px;
            }
            
            .gsap-box {
                width: 100px;
                height: 100px;
                position: absolute;
                border-radius: 8px;
            }
            
            .gsap-text {
                font-size: 3em;
                position: absolute;
                opacity: 0;
                color: #fff;
                width: 100%;
                text-align: center;
            }
            
            .gsap-stagger-box {
                width: 50px;
                height: 50px;
                background-color: #3498db;
                display: inline-block;
                margin: 8px;
                border-radius: 5px;
            }
            
            .gsap-timeline-element {
                width: 200px;
                height: 60px;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
                line-height: 60px;
                border-radius: 8px;
                color: white;
                opacity: 0;
                font-size: 26px;
            }
            
            /* 歌尔股份专用样式 */
            .financial-data {
                color: #1a73e8;
                font-weight: bold;
            }
            
            .highlight-box {
                background-color: rgba(26, 115, 232, 0.1);
                border-left: 4px solid #1a73e8;
                padding: 10px 20px;
                margin: 20px 0;
            }
            
            .data-comparison {
                display: flex;
                justify-content: space-around;
                margin: 20px 0;
            }
            
            .comparison-item {
                text-align: center;
            }
            
            .comparison-value {
                font-size: 2em;
                font-weight: bold;
            }
            
            .positive-value {
                color: #2ecc71;
            }
            
            .negative-value {
                color: #e74c3c;
            }

            /* 标题页样式优化 */
            .title-content {
                margin-top: 40px;
            }

            /* 调整reveal.js内部元素的样式 */
            .reveal h1 {
                font-size: 2.2em;
                margin-bottom: 0.4em;
            }

            .reveal h2 {
                font-size: 1.8em;
                margin-bottom: 0.6em;
            }

            .reveal h3 {
                font-size: 1.4em;
                margin-bottom: 0.8em;
            }

            .reveal p {
                margin-bottom: 20px;
            }

            /* 调整内容间距 */
            .reveal section {
                padding: 20px 0;
            }

            /* GSAP动画容器样式 */
            .gsap-container {
                width: 100%;
                height: 450px;
                position: relative;
                overflow: hidden;
                margin-top: 40px;
            }
            
            .gsap-box {
                width: 100px;
                height: 100px;
                position: absolute;
                border-radius: 8px;
            }
            
            .gsap-text {
                font-size: 3em;
                position: absolute;
                opacity: 0;
                color: #fff;
                width: 100%;
                text-align: center;
            }
            
            .gsap-stagger-box {
                width: 50px;
                height: 50px;
                background-color: #3498db;
                display: inline-block;
                margin: 8px;
                border-radius: 5px;
            }
            
            .gsap-timeline-element {
                width: 200px;
                height: 60px;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
                line-height: 60px;
                border-radius: 8px;
                color: white;
                opacity: 0;
                font-size: 26px;
            }
            
            /* --- 新增：标题页动画初始状态 --- */
            .reveal .slides section[data-background-gradient] .threejs-container,
            .reveal .slides section[data-background-gradient] .title-content h1,
            .reveal .slides section[data-background-gradient] .title-content p small {
                opacity: 1; /* 修改为1 */
                transition: none;
            }

            .reveal .slides section[data-background-gradient] .title-content h1 {
                transform: translateY(0); /* 移除初始位移 */
            }
            /* --- 结束：标题页动画初始状态 --- */

            /* --- 新增：增大目录按钮字体 --- */
            #toc-animation .gsap-timeline-element {
                width: 200px;
                height: 60px;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
                line-height: 60px;
                border-radius: 8px;
                color: white;
                opacity: 1; /* 修改为1，使其默认显示 */
                font-size: 26px;
            }
            /* --- 结束：增大目录按钮字体 --- */

            /* 调整公司概述页面的字体大小 */
            section h2 {
                font-size: 48px; /* 原来可能更大，调小一些 */
                margin-bottom: 30px;
            }

            .highlight-box {
                background: rgba(30, 41, 59, 0.8);
                border-radius: 10px;
                padding: 20px;
                margin: 15px 0;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }

            .highlight-box h3 {
                font-size: 28px; /* 原来可能是32px或更大，调小 */
                margin-bottom: 15px;
                color: #e2e8f0;
            }

            .highlight-box p {
                font-size: 20px; /* 原来可能是24px，调小 */
                line-height: 1.5;
                margin-bottom: 10px;
            }

            .highlight-box ul {
                font-size: 20px; /* 原来可能是24px，调小 */
                line-height: 1.5;
                margin-left: 20px;
            }

            .highlight-box li {
                margin-bottom: 8px;
            }

            .highlight-box strong {
                color: #60a5fa;
            }
        </style>
	</head>

	<body>

		<div class="reveal">

			<!-- 演示文稿的幻灯片容器 -->
			<div class="slides">
				<!-- 1. 标题页 -->
				<section data-background-gradient="linear-gradient(to bottom, #283b95, #17b2c3)">
                    <div class="threejs-container">
                        <canvas id="goel-logo-canvas"></canvas>
                        <div class="threejs-loading" id="logo-loading-text">加载中...</div>
                    </div>
                    <div class="title-content">
					    <h1>歌尔股份财务和成功因素分析</h1>
					    <p>
						    <small>第二组：闫杰龙、刘铭宇、谭显丞、张容馨、王康康</small>
					    </p>
                    </div>
				</section>

				<!-- 2. 目录页 -->
				<section>
					<!-- <h2>内容概览</h2> --> <!-- 删除此行 -->
					<div class="gsap-container" id="toc-animation">
                        <div class="gsap-timeline-element" style="top: 15%; background-color: #1a73e8; box-shadow: 0 5px 15px rgba(26, 115, 232, 0.3); border-radius: 12px; font-weight: 600;">公司概述</div>
                        <div class="gsap-timeline-element" style="top: 30%; background-color: #3498db; box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3); border-radius: 12px; font-weight: 600;">财务指标分析</div>
                        <div class="gsap-timeline-element" style="top: 45%; background-color: #2ecc71; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); border-radius: 12px; font-weight: 600;">成功因素分析</div>
                        <div class="gsap-timeline-element" style="top: 60%; background-color: #e67e22; box-shadow: 0 5px 15px rgba(230, 126, 34, 0.3); border-radius: 12px; font-weight: 600;">财务问题分析</div>
                        <div class="gsap-timeline-element" style="top: 75%; background-color: #9b59b6; box-shadow: 0 5px 15px rgba(155, 89, 182, 0.3); border-radius: 12px; font-weight: 600;">未来展望</div>
                    </div>
				</section>

				<!-- 3. 公司概述第一页 -->
				<section>
					<h2>公司概述</h2>
					<div class="highlight-box">
						<h3>歌尔股份有限公司（股票代码：002241）</h3>
						<p>全球领先的智能声学、精密光学和电子产品解决方案提供商</p>
					</div>
					<div class="highlight-box">
						<h3>市场地位</h3>
						<ul>
							<li>全球知名的消费电子精密零组件和智能产品制造商</li>
							<li>苹果公司AirPods等产品的重要供应商</li>
							<li>VR/AR领域的核心供应商之一</li>
						</ul>
					</div>
					<div class="highlight-box">
						<h3>2023年重要荣誉</h3>
						<ul>
							<li>中国电子元器件骨干企业百强榜单第4位</li>
							<li>中国电子信息竞争力百强企业第15位</li>
							<li>中国制造业民营企业500强第55位</li>
						</ul>
					</div>
				</section>

				<!-- 4. 公司概述第二页 -->
				<section>
					<h2>主营业务</h2>
					<div class="highlight-box">
						<p>公司主要服务于全球科技和消费电子行业领先客户，提供精密零组件和智能硬件的垂直整合产品解决方案。</p>
					</div>
					<div class="highlight-box">
						<h3>主要业务板块</h3>
						<ul>
							<li><strong>精密零组件业务</strong>：声学、光学、微电子、结构件等产品，包括微型扬声器/受话器、MEMS传感器、VR/MR光学器件等。</li>
							<li><strong>智能声学整机业务</strong>：TWS智能无线耳机、有线/无线耳机、智能音箱等。</li>
							<li><strong>智能硬件业务</strong>：VR虚拟现实、MR混合现实、AR增强现实、智能可穿戴、智能家用电子游戏机及配件、智能家居等。</li>
						</ul>
					</div>
					<div class="highlight-box">
						<h3>主要客户</h3>
						<p>全球科技巨头，包括苹果、Meta等领先企业</p>
					</div>
				</section>

				<!-- 5. 财务指标分析 -->
				<section>
					<section>
						<h2>财务指标分析</h2>
						<p>2014-2023年主要财务数据与趋势</p>
					</section>
                    
                    <section>
                        <h2>营业收入与净利润趋势</h2>
                        <div class="echarts-container" id="revenue-profit-chart"></div>
                        <p>近十年营收持续增长，净利润波动明显</p>
                    </section>
                    
                    <section>
                        <h2>季度数据分析</h2>
                        <div class="echarts-container" id="quarterly-data-chart"></div>
                        <p>2023年各季度营收与利润表现</p>
                    </section>
                    
                    <section>
                        <h2>毛利率变化与同业对比</h2>
                        <div class="echarts-container" id="gross-margin-chart"></div>
                        <p>2020年后毛利率持续下滑，低于行业平均水平</p>
                    </section>
                    
                    <section>
                        <h2>ROE历年变化</h2>
                        <div class="echarts-container" id="roe-chart"></div>
                        <p>ROE保持波动上升趋势，整体优于行业平均</p>
                    </section>
                    
                    <section>
                        <h2>资产负债结构</h2>
                        <div class="echarts-container" id="asset-liability-chart"></div>
                        <p>资产结构合理，负债率适中</p>
                    </section>
                    
                    <section>
                        <h2>客户集中度分析</h2>
                        <div class="echarts-container" id="customer-chart"></div>
                        <p>客户集中度较高，前五大客户占比超过60%</p>
                    </section>
                    
                    <section>
                        <h2>同行业竞争对手对比</h2>
                        <div class="echarts-container" id="competitors-radar-chart"></div>
                        <p>在营收规模、盈利能力和估值等多维度的对比</p>
                    </section>
                    
                    <!-- 新增：股东结构分析页面 -->
                    <section>
                        <h2>股东结构分析</h2>
                        <div class="echarts-container" id="shareholder-structure-chart"></div>
                        <p>控股股东与实际控制人持股稳定，管理层持股比例高</p>
                        <div class="highlight-box">
                            <p>歌尔集团持股14.84%，为第一大股东</p>
                            <p>创始人姜滨、姜龙合计持股15.72%，保持实际控制地位</p>
                        </div>
                    </section>
                    
                    <!-- 新增：股权集中度分析页面 -->
                    <section>
                        <h2>股权集中度分析</h2>
                        <div class="echarts-container" id="shareholder-concentration-chart"></div>
                        <p>前十大股东合计持股约40%，股权相对集中</p>
                        <div class="highlight-box">
                            <p>员工持股计划持股1.97%，有助于核心员工利益绑定</p>
                            <p>外资持股占比有所下降，从3.64%降至3.29%</p>
                        </div>
                    </section>
                    
                    <!-- 新增：股价表现分析页面 -->
                    <section>
                        <h2>股价历年表现</h2>
                        <div class="echarts-container" id="stock-price-chart"></div>
                        <p>近十年股价呈现明显周期性波动特征</p>
                        <div class="highlight-box">
                            <p>两轮完整周期：2014-2018年及2019-2023年</p>
                            <p>历史最高点69.90元(2021年)，最低点8.10元(2018年)</p>
                        </div>
                    </section>
                    
                    <!-- 新增：股价与业绩关联分析页面 -->
                    <section>
                        <h2>股价与业绩关联分析</h2>
                        <div class="echarts-container" id="stock-performance-chart"></div>
                        <p>股价波动通常领先于业绩变化，且波动幅度更大</p>
                        <div class="highlight-box">
                            <p>2021年股价高点对应业绩高点，2018年股价低点对应业绩低谷</p>
                            <p>市值从2014年约235亿元增长至2023年约780亿元，增长3.3倍</p>
                        </div>
                    </section>
                    
                    <!-- 新增：估值指标分析页面 -->
                    <section>
                        <h2>市场估值指标分析</h2>
                        <div class="echarts-container" id="valuation-indicators-chart"></div>
                        <p>当前PE约72倍(2023年业绩)，动态PE约29倍(2024年预测)</p>
                        <div class="data-comparison">
                            <div class="comparison-item">
                                <p>市盈率(PE)</p>
                                <p class="comparison-value">72.0</p>
                                <p>高于行业平均(35.0)</p>
                            </div>
                            <div class="comparison-item">
                                <p>市净率(PB)</p>
                                <p class="comparison-value">2.53</p>
                                <p>低于行业平均(3.20)</p>
                            </div>
                            <div class="comparison-item">
                                <p>EV/EBITDA</p>
                                <p class="comparison-value">18.0</p>
                                <p>低于行业平均(22.0)</p>
                            </div>
                        </div>
                    </section>
				</section>

				<!-- 6. 成功因素分析 -->
				<section>
					<section>
						<h2>成功因素分析</h2>
						<p>歌尔股份的核心竞争优势</p>
					</section>
                    
                    <section>
                        <h2>技术创新与研发实力</h2>
                        <div class="echarts-container" id="rd-investment-bar"></div>
                        <p>持续的研发投入是公司持续竞争力的关键</p>
                    </section>
                    
                    <section>
                        <h2>精密制造与智能制造能力</h2>
                        <div class="gsap-container" id="manufacturing-animation">
                            <div class="gsap-box" style="background-color: #3498db; left: 20%; top: 40%;">精密制造</div>
                            <div class="gsap-box" style="background-color: #2ecc71; left: 50%; top: 40%;">智能制造</div>
                            <div class="gsap-box" style="background-color: #e74c3c; left: 80%; top: 40%;">质量管控</div>
                        </div>
                        <p>自动化生产线与精密制造工艺的完美结合</p>
                    </section>
                    
                    <section>
                        <h2>优质客户资源与战略转型</h2>
                        <div class="threejs-container">
                            <canvas id="client-relationship-canvas"></canvas>
                            <div class="threejs-loading" id="client-loading-text">加载中...</div>
                        </div>
                        <p>与全球顶尖科技公司建立深度合作关系</p>
                    </section>
                    
                    <section>
                        <h2>核心管理团队优势</h2>
                        <div class="gsap-container" id="management-text">
                            <h1 class="gsap-text" style="top: 40%;">专业管理团队</h1>
                            <h1 class="gsap-text" style="top: 60%;">长期战略眼光</h1>
                        </div>
                        <p>管理团队稳定，战略前瞻性强</p>
                    </section>
				</section>

				<!-- 7. 财务问题分析 -->
				<section>
					<section>
						<h2>财务问题分析</h2>
						<p>潜在风险与挑战</p>
					</section>
                    
                    <section>
                        <h2>客户集中度问题</h2>
                        <div class="echarts-container" id="customer-risk-analysis"></div>
                        <p>对大客户的依赖程度过高带来的经营风险</p>
                    </section>
                    
                    <section>
                        <h2>毛利率下滑分析</h2>
                        <div class="echarts-container" id="margin-decline-analysis"></div>
                        <p>原材料价格上涨与竞争加剧导致毛利率承压</p>
                    </section>
                    
                    <section>
                        <h2>成本结构分析</h2>
                        <div class="echarts-container" id="cost-structure-pie"></div>
                        <p>直接材料成本占比过高导致成本控制困难</p>
                    </section>
                    
                    <section>
                        <h2>业绩波动与周期性</h2>
                        <div class="echarts-container" id="performance-volatility-chart"></div>
                        <p>受终端产品生命周期影响明显</p>
                    </section>
				</section>

				<!-- 7. 未来展望 -->
				<section>
					<section>
						<h2>未来展望</h2>
						<p>行业趋势与发展机遇</p>
					</section>
                    
                    <section>
                        <h2>行业发展趋势</h2>
                        <div class="gsap-container" id="industry-trend-stagger" style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center;">
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                            <div class="gsap-stagger-box"></div>
                        </div>
                        <p>AR/VR、智能穿戴设备将成为新增长点</p>
                    </section>
                    
                    <section>
                        <h2>公司发展战略</h2>
                        <div class="threejs-container">
                            <canvas id="future-strategy-canvas"></canvas>
                            <div class="threejs-loading" id="future-loading-text">加载中...</div>
                        </div>
                        <p>深化精密制造能力，扩大产业链布局</p>
                    </section>
                    
                    <section>
                        <h2>2024年预期</h2>
                        <div class="echarts-container" id="future-forecast-chart"></div>
                        <p>新产品带动业绩增长，毛利率有望企稳回升</p>
                    </section>
				</section>

				<!-- 8. 结束页 -->
				<section style="text-align: center;">
					<h1>谢谢关注!</h1>
					<p>
						<small>联系我们：finance-analysis@example.com</small>
					</p>
				</section>
			</div>

		</div>

		<script src="reveal.js-5.2.1/dist/reveal.js"></script>
		<script src="reveal.js-5.2.1/plugin/zoom/zoom.js"></script>
		<script src="reveal.js-5.2.1/plugin/notes/notes.js"></script>
		<script src="reveal.js-5.2.1/plugin/search/search.js"></script>
		<script src="reveal.js-5.2.1/plugin/markdown/markdown.js"></script>
		<script src="reveal.js-5.2.1/plugin/highlight/highlight.js"></script>
		
		<script>
			// 初始化Reveal.js
			Reveal.initialize({
				controls: true,
				progress: true,
				center: true,
				hash: true,
				transition: 'slide',
				backgroundTransition: 'fade',
				plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
			});
            
            // ==========Reveal.js事件处理==========
            Reveal.on('slidechanged', function(event) {
                console.log('幻灯片切换事件触发');
                const currentSlide = event.currentSlide;
                
                // 检测当前幻灯片是否包含ECharts或Three.js元素以及GSAP动画
                const hasECharts = currentSlide.querySelectorAll('.echarts-container').length > 0;
                const hasThreeJs = currentSlide.querySelectorAll('.threejs-container').length > 0;
                const hasGsap = currentSlide.querySelectorAll('.gsap-container').length > 0;
                
                console.log('检测ECharts容器:', hasECharts);
                console.log('检测Three.js容器:', hasThreeJs);
                console.log('检测GSAP容器:', hasGsap);
                
                // 重置变量
                isEChartsSlide = !!hasECharts;
                isThreeJsSlide = !!hasThreeJs;
                isGsapSlide = !!hasGsap;
                
                // 处理Three.js幻灯片
                if (isThreeJsSlide) {
                    handleThreeJsSlide(currentSlide);
                } else {
                    // 停止Three.js动画
                    isThreeJsSlide = false;
                    currentThreeJsCanvas = '';
                }
                
                // 处理ECharts幻灯片
                if (isEChartsSlide) {
                    handleEChartsSlide(currentSlide);
                    // 调整图表大小以确保完全渲染
                    window.dispatchEvent(new Event('resize'));
                } else {
                    // 重置ECharts类型
                    currentEChartsType = '';
                }
                
                // 处理GSAP动画幻灯片
                if (isGsapSlide) {
                    checkGsapSlide();
                }
            });
            
            // 幻灯片加载完成事件
            Reveal.on('ready', function(event) {
                console.log('幻灯片已就绪');
                // 获取当前幻灯片并检查各种图表
                const currentSlide = event.currentSlide;
                
                // 检测当前幻灯片是否包含ECharts或Three.js元素以及GSAP动画
                const hasECharts = currentSlide.querySelectorAll('.echarts-container').length > 0;
                const hasThreeJs = currentSlide.querySelectorAll('.threejs-container').length > 0;
                const hasGsap = currentSlide.querySelectorAll('.gsap-container').length > 0;
                
                console.log('初始检测ECharts容器:', hasECharts);
                console.log('初始检测Three.js容器:', hasThreeJs);
                console.log('初始检测GSAP容器:', hasGsap);
                
                // 设置变量
                isEChartsSlide = !!hasECharts;
                isThreeJsSlide = !!hasThreeJs;
                isGsapSlide = !!hasGsap;
                
                // 处理Three.js幻灯片
                if (isThreeJsSlide) {
                    handleThreeJsSlide(currentSlide);
                }
                
                // 处理ECharts幻灯片
                if (isEChartsSlide) {
                    handleEChartsSlide(currentSlide);
                }
                
                // 处理GSAP动画幻灯片
                if (isGsapSlide) {
                    checkGsapSlide();
                }
                
                // 调整图表大小
                window.dispatchEvent(new Event('resize'));
                
                // 初始化首页的Three.js内容
                if (currentSlide.querySelector('#goel-logo-canvas')) {
                    console.log('初始化首页Three.js内容');
                    initGoelLogo();
                }
                
                // 初始化目录页的GSAP动画
                if (currentSlide.querySelector('#toc-animation')) {
                    console.log('初始化目录页GSAP动画');
                    initGSAP('toc');
                }
            });
            
            // 处理Three.js幻灯片
            function handleThreeJsSlide(slide) {
                console.log('处理Three.js幻灯片');
                // 检查幻灯片上的内容类型
                const goeLogoCanvas = slide.querySelector('#goel-logo-canvas');
                const marketCanvas = slide.querySelector('#market-position-canvas');
                const clientCanvas = slide.querySelector('#client-relationship-canvas');
                const futureCanvas = slide.querySelector('#future-strategy-canvas');
                
                // 记录找到的canvas
                if (goeLogoCanvas) console.log('找到logo canvas');
                if (marketCanvas) console.log('找到market canvas');
                if (clientCanvas) console.log('找到client canvas');
                if (futureCanvas) console.log('找到future canvas');
                
                // 初始化不同类型的Three.js内容
                if (goeLogoCanvas) {
                    currentThreeJsCanvas = 'logo';
                    initGoelLogo();
                } else if (marketCanvas) {
                    currentThreeJsCanvas = 'market';
                    initMarketPosition();
                } else if (clientCanvas) {
                    currentThreeJsCanvas = 'client';
                    initClientRelationship();
                } else if (futureCanvas) {
                    currentThreeJsCanvas = 'future';
                    initFutureStrategy();
                }
            }
            
            // 处理ECharts幻灯片
            function handleEChartsSlide(slide) {
                // 检查幻灯片上包含的图表类型
                const hasRevenueSection = slide.querySelector('#revenue-profit-chart');
                const hasGrossMarginSection = slide.querySelector('#gross-margin-chart');
                const hasBusinessStructureSection = slide.querySelector('#business-structure-chart');
                const hasRoeSection = slide.querySelector('#roe-chart');
                const hasAssetSection = slide.querySelector('#asset-liability-chart');
                const hasLiabilitySection = slide.querySelector('#liability-chart');
                const hasCustomerSection = slide.querySelector('#customer-chart');
                const hasRdSection = slide.querySelector('#rd-investment-bar');
                const hasCustomerRiskSection = slide.querySelector('#customer-risk-analysis');
                const hasMarginDeclineSection = slide.querySelector('#margin-decline-analysis');
                const hasPerformanceSection = slide.querySelector('#performance-volatility-chart');
                const hasForecastSection = slide.querySelector('#future-forecast-chart');
                // 新增的图表部分
                const hasShareholderStructureSection = slide.querySelector('#shareholder-structure-chart');
                const hasShareholderConcentrationSection = slide.querySelector('#shareholder-concentration-chart');
                const hasStockPriceSection = slide.querySelector('#stock-price-chart');
                const hasStockPerformanceSection = slide.querySelector('#stock-performance-chart');
                const hasValuationIndicatorsSection = slide.querySelector('#valuation-indicators-chart');
                
                console.log('检查图表容器:', {
                    'revenue-profit-chart': !!hasRevenueSection,
                    'gross-margin-chart': !!hasGrossMarginSection,
                    'business-structure-chart': !!hasBusinessStructureSection,
                    'roe-chart': !!hasRoeSection,
                    'asset-liability-chart': !!hasAssetSection,
                    'customer-chart': !!hasCustomerSection,
                    'rd-investment-bar': !!hasRdSection,
                    'customer-risk-analysis': !!hasCustomerRiskSection,
                    'margin-decline-analysis': !!hasMarginDeclineSection,
                    'shareholder-structure-chart': !!hasShareholderStructureSection,
                    'shareholder-concentration-chart': !!hasShareholderConcentrationSection,
                    'stock-price-chart': !!hasStockPriceSection,
                    'stock-performance-chart': !!hasStockPerformanceSection,
                    'valuation-indicators-chart': !!hasValuationIndicatorsSection
                });
                
                // 初始化幻灯片上的所有图表，避免使用else if链，确保所有图表都能被初始化
                if (hasRevenueSection) {
                    initRevenueProfitLine();
                }
                if (hasGrossMarginSection) {
                    initGrossMarginLine();
                }
                if (hasBusinessStructureSection) {
                    console.log('初始化业务结构图表');
                    initBusinessStructurePie();
                }
                if (hasRoeSection) {
                    initRoeLine();
                }
                if (hasAssetSection) {
                    initAssetStructurePie();
                }
                if (hasLiabilitySection) {
                    initLiabilityStructurePie();
                }
                if (hasCustomerSection) {
                    initCustomerConcentrationBar();
                }
                if (hasRdSection) {
                    initRdInvestmentBar();
                }
                if (hasCustomerRiskSection) {
                    initCustomerRiskAnalysis();
                }
                if (hasMarginDeclineSection) {
                    initMarginDeclineAnalysis();
                }
                if (hasPerformanceSection) {
                    initPerformanceVolatility();
                }
                if (hasForecastSection) {
                    initFutureForecast();
                }
                if (hasShareholderStructureSection) {
                    initShareholderStructurePie();
                }
                if (hasShareholderConcentrationSection) {
                    initShareholderConcentrationBar();
                }
                if (hasStockPriceSection) {
                    initStockPriceLine();
                }
                if (hasStockPerformanceSection) {
                    initStockPerformanceRelation();
                }
                if (hasValuationIndicatorsSection) {
                    initValuationIndicators();
                }
            }
            
            // 财务数据对象 - 实际数据（基于歌尔股份2023年年报）
            const goelData = {
                // 营收与利润数据（单位：亿元）- 使用MD文档中的实际数据
                revenue: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    values: [123.00, 130.70, 190.40, 264.70, 237.80, 351.00, 577.40, 782.21, 1048.94, 985.74]
                },
                profit: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    values: [16.60, 12.50, 19.00, 22.80, 6.90, 8.80, 26.10, 42.75, 17.49, 10.88]
                },
                // 毛利率数据（百分比）
                grossMargin: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    goel: [24.40, 21.82, 22.10, 23.21, 16.53, 15.43, 16.03, 14.13, 11.13, 8.93],
                    // 行业数据未提供，保留原有估计值但稍作调整以保持一致性
                    industry: [23.00, 22.50, 22.00, 21.50, 21.00, 20.50, 20.00, 19.50, 19.00, 18.50]
                },
                // 业务结构数据（2023年）
                businessStructure: [
                    {value: 13.18, name: '精密零组件'},
                    {value: 24.54, name: '智能声学整机'},
                    {value: 59.56, name: '智能硬件'},
                    {value: 2.73, name: '其他业务'}
                ],
                // ROE数据（百分比）
                roe: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    goel: [19.89, 10.57, 11.91, 17.22, 5.07, 4.31, 14.49, 17.61, 6.17, 3.59],
                    // 行业数据未提供，保留原有估计值但稍作调整以保持一致性
                    industry: [15.00, 14.50, 14.00, 13.50, 13.00, 12.50, 12.00, 11.50, 11.00, 10.50]
                },
                // 资产负债结构（2023年）
                assetStructure: [
                    {value: 30.25, name: '固定资产'},
                    {value: 19.98, name: '货币资金'},
                    {value: 16.85, name: '应收账款'},
                    {value: 14.64, name: '存货'},
                    {value: 2.81, name: '在建工程'},
                    {value: 15.47, name: '其他资产'} // 计算得到
                ],
                liabilityStructure: [
                    {value: 8.99, name: '长期借款'},
                    {value: 7.07, name: '短期借款'},
                    {value: 23.84, name: '应付账款'},
                    {value: 4.71, name: '合同负债'},
                    {value: 12.64, name: '其他负债'} // 估计值，以使总和约为57.25%（文档提到的资产负债率）
                ],
                // 客户集中度数据（2023年）
                customerConcentration: {
                    names: ['第一大客户', '第二大客户', '其他三大客户', '其他客户'],
                    values: [43.38, 27.02, 18.35, 11.25] // 后两项是计算/估计值
                },
                // 研发投入数据
                rdInvestment: {
                    years: ['2019', '2020', '2021', '2022', '2023'],
                    // 2019-2021年数据未提供，使用估计值
                    amount: [25.00, 35.00, 45.00, 51.98, 45.73], 
                    percentage: [7.12, 6.06, 5.75, 4.96, 4.64] // 2019-2021年数据是估计值
                },
                // 客户风险分析数据
                customerRiskAnalysis: {
                    categories: ['高度依赖', '中度依赖', '低度依赖'],
                    years: ['2019', '2020', '2021', '2022', '2023'],
                    // 具体数据未提供，使用估计值但保持与客户集中度数据一致
                    data: [
                        [60, 65, 68, 70, 70.4], // 高度依赖（第一、二大客户合计）
                        [20, 18, 17, 16, 18.35], // 中度依赖（其他三大客户）
                        [20, 17, 15, 14, 11.25]  // 低度依赖（其他客户）
                    ]
                },
                // 毛利率下滑因素分析
                marginDeclineFactors: [
                    {value: 40, name: '业务结构变化'}, // 智能硬件占比提升
                    {value: 25, name: '市场竞争加剧'},
                    {value: 20, name: '原材料成本上升'},
                    {value: 10, name: '人工成本上升'},
                    {value: 5, name: '全球经济不确定性'}
                ],
                // 业绩波动分析
                performanceVolatility: {
                    years: ['2019', '2020', '2021', '2022', '2023'],
                    revenue: [100, 164.29, 222.57, 298.45, 280.44], // 根据同比增长率计算
                    profit: [100, 296.59, 485.80, 198.75, 123.64], // 根据同比增长率计算
                    industry: [100, 130, 150, 165, 180] // 估计值
                },
                // 2024年预测数据
                forecast2024: {
                    revenue: 1009.54,
                    profit: 26.65,
                    grossMargin: 12.57,
                    roe: 6.5 // 估计值，未提供
                },
                // 新增部分：季度数据（2023年）
                quarterlyData: {
                    quarters: ['第一季度', '第二季度', '第三季度', '第四季度'],
                    revenue: [241.22, 210.50, 287.75, 246.26],
                    profit: [1.06, 3.16, 4.70, 1.96],
                    cashflow: [1.34, 19.68, 12.99, 47.51]
                },
                // 新增部分：成本构成（2023年）
                costStructure: [
                    {value: 87.18, name: '直接材料'},
                    {value: 4.64, name: '直接人工'},
                    {value: 8.18, name: '制造费用'}
                ],
                // 新增部分：竞争对手对比（2023年）
                competitors: {
                    companies: ['歌尔股份', '立讯精密', '舜宇光学', '瑞声科技'],
                    revenue: [985.74, 1894.87, 267.45, 149.78],
                    profit: [10.88, 66.34, 15.6, 8.24],
                    grossMargin: [8.93, 13.06, 19.8, 24.9],
                    pe: [72.0, 28.5, 36.2, 18.6],
                    pb: [2.53, 3.84, 2.62, 1.23]
                },
                // 新增部分：地域销售分布（2023年）
                regionDistribution: [
                    {value: 7.28, name: '境内'},
                    {value: 92.72, name: '境外'}
                ],
                // 新增部分：营收与利润同比增长率
                growthRate: {
                    years: ['2018', '2019', '2020', '2021', '2022', '2023'],
                    revenue: [-10.16, 47.60, 64.29, 35.47, 34.10, -6.03],
                    profit: [-69.74, 27.54, 122.95, 64.34, -58.42, -37.80]
                },
                // 新增部分：分业务毛利率(2023年)
                businessGrossMargin: {
                    categories: ['精密零组件', '智能声学整机', '智能硬件', '综合毛利率'],
                    values: [20.49, 6.74, 7.27, 8.93],
                    changes: [-0.71, 1.09, -3.87, -2.20] // 同比变动(百分点)
                },
                // 新增部分：股东结构数据（2023年底）
                shareholderStructure: {
                    names: ['歌尔集团', '姜滨', '姜龙', '香港中央结算', '中国证券金融', '员工持股计划', '其他股东'],
                    values: [14.84, 8.40, 7.32, 3.29, 2.43, 1.97, 61.75]
                },
                // 新增部分：股价历年表现数据
                stockPrice: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    yearEnd: [11.78, 27.30, 14.53, 16.92, 8.40, 20.09, 38.50, 32.21, 19.69, 22.14],
                    highest: [14.07, 37.56, 27.96, 23.21, 19.30, 21.68, 46.90, 69.90, 32.58, 28.39],
                    lowest: [8.56, 11.83, 13.80, 14.01, 8.10, 8.30, 17.10, 27.60, 15.60, 17.50],
                    changeRate: [3.79, 130.77, -46.78, 17.66, -50.30, 139.45, 92.98, -16.16, -39.00, 12.96]
                },
                // 新增部分：市值变化数据（亿元）
                marketValue: {
                    years: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    values: [235, 546, 291, 338, 180, 431, 831, 697, 431, 780]
                },
                // 新增部分：估值指标数据
                valuation: {
                    indicators: ['市盈率(PE)', '市净率(PB)', 'EV/EBITDA'],
                    current: [72.0, 2.53, 18.0],
                    forecast: [29.0, 2.53, 15.0],
                    industry: [35.0, 3.20, 22.0]
                }
            };
            
            // Three.js变量
            let camera, scene, renderer;
            let logoMesh, marketMesh, clientMesh, futureMesh;
            let isThreeJsSlide = false;
            let currentThreeJsCanvas = '';
            
            // ECharts变量
            let businessPieChart, revenueProfitChart, grossMarginChart, roeChart, assetLiabilityChart, customerChart;
            let rdInvestmentChart, customerRiskChart, marginDeclineChart, performanceVolatilityChart, futureChart;
            let competitorsRadarChart, quarterlyDataChart, costStructureChart;
            let shareholderStructurePieChart, shareholderConcentrationBarChart, stockPriceLineChart;
            let stockPerformanceRelationChart, valuationIndicatorsChart;
            let currentEChartsType = '';
            
            // GSAP变量
            let isGsapSlide = false;
            let tocAnimation, manufacturingAnimation, managementTextAnimation, industryTrendAnimation;
            
            // 检查是否为Three.js幻灯片
            function checkThreeJsSlide() {
                try {
                    const currentSlide = Reveal.getCurrentSlide();
                    
                    if (currentSlide.querySelector('#goel-logo-canvas')) {
                        isThreeJsSlide = true;
                        currentThreeJsCanvas = 'logo';
                        initGoelLogo();
                    } else if (currentSlide.querySelector('#market-position-canvas')) {
                        isThreeJsSlide = true;
                        currentThreeJsCanvas = 'market';
                        initMarketPosition();
                    } else if (currentSlide.querySelector('#client-relationship-canvas')) {
                        isThreeJsSlide = true;
                        currentThreeJsCanvas = 'client';
                        initClientRelationship();
                    } else if (currentSlide.querySelector('#future-strategy-canvas')) {
                        isThreeJsSlide = true;
                        currentThreeJsCanvas = 'future';
                        initFutureStrategy();
                    } else {
                        isThreeJsSlide = false;
                        currentThreeJsCanvas = '';
                    }
                } catch (e) {
                    console.error('检查ThreeJS幻灯片时出错:', e);
                }
            }
            
            // 检查当前幻灯片是否包含ECharts图表
            function checkEChartsSlide() {
                try {
                    const currentSlide = Reveal.getCurrentSlide();
                    
                    // 重置当前图表类型
                    currentEChartsType = '';
                    
                    // 检测当前幻灯片中的图表并分别初始化
                    if (currentSlide.querySelector('#revenue-profit-chart')) {
                        console.log('检测到收入与利润走势图');
                        currentEChartsType = 'revenue-profit';
                        initECharts('revenue-profit');
                    }
                    if (currentSlide.querySelector('#gross-margin-chart')) {
                        console.log('检测到毛利率走势图');
                        currentEChartsType = 'gross-margin';
                        initECharts('gross-margin');
                    }
                    if (currentSlide.querySelector('#business-structure-chart')) {
                        console.log('检测到业务结构图');
                        currentEChartsType = 'business-structure';
                        initECharts('business-structure');
                    }
                    if (currentSlide.querySelector('#roe-chart')) {
                        console.log('检测到ROE走势图');
                        currentEChartsType = 'roe';
                        initECharts('roe');
                    }
                    if (currentSlide.querySelector('#asset-liability-chart')) {
                        console.log('检测到资产负债图');
                        currentEChartsType = 'asset-liability';
                        initECharts('asset-liability');
                    }
                    if (currentSlide.querySelector('#risk-analysis-chart')) {
                        console.log('检测到风险分析图');
                        currentEChartsType = 'risk-analysis';
                        initECharts('risk-analysis');
                    }
                    if (currentSlide.querySelector('#competitors-radar-chart')) {
                        console.log('检测到竞争对手雷达图');
                        currentEChartsType = 'competitors-radar';
                        initECharts('competitors-radar');
                    }
                    if (currentSlide.querySelector('#quarterly-data-chart')) {
                        console.log('检测到季度数据图');
                        currentEChartsType = 'quarterly-data';
                        initECharts('quarterly-data');
                    }
                    if (currentSlide.querySelector('#cost-structure-pie')) {
                        console.log('检测到成本结构饼图');
                        currentEChartsType = 'cost-structure';
                        initECharts('cost-structure');
                    }
                    if (currentSlide.querySelector('#shareholder-structure-chart')) {
                        console.log('检测到股东结构饼图');
                        currentEChartsType = 'shareholder-structure';
                        initECharts('shareholder-structure');
                    }
                    if (currentSlide.querySelector('#shareholder-concentration-chart')) {
                        console.log('检测到股东集中度图');
                        currentEChartsType = 'shareholder-concentration';
                        initECharts('shareholder-concentration');
                    }
                    if (currentSlide.querySelector('#stock-price-chart')) {
                        console.log('检测到股价历年表现图');
                        currentEChartsType = 'stock-price';
                        initECharts('stock-price');
                    }
                    if (currentSlide.querySelector('#stock-performance-chart')) {
                        console.log('检测到股价与业绩关联分析图');
                        currentEChartsType = 'stock-performance';
                        initECharts('stock-performance');
                    }
                    if (currentSlide.querySelector('#valuation-indicators-chart')) {
                        console.log('检测到市场估值指标分析图');
                        currentEChartsType = 'valuation-indicators';
                        initECharts('valuation-indicators');
                    }
                    if (currentSlide.querySelector('#margin-decline-analysis')) {
                        console.log('检测到毛利率下滑因素分析图');
                        currentEChartsType = 'margin-decline';
                        initECharts('margin-decline');
                    }
                } catch (e) {
                    console.error('检查图表时出错:', e);
                }
            }
            
            // 检查是否为GSAP动画幻灯片
            function checkGsapSlide() {
                try {
                    console.log('检查GSAP动画幻灯片');
                    const currentSlide = Reveal.getCurrentSlide();
                    
                    // 首先暂停所有GSAP动画
                    if (tocAnimation) tocAnimation.pause();
                    if (manufacturingAnimation) manufacturingAnimation.pause();
                    if (managementTextAnimation) managementTextAnimation.pause();
                    if (industryTrendAnimation) industryTrendAnimation.pause();
                    
                    if (currentSlide.querySelector('#toc-animation')) {
                        console.log('找到目录动画容器，初始化动画');
                        isGsapSlide = true;
                        initGSAP('toc');
                    } else if (currentSlide.querySelector('#manufacturing-animation')) {
                        console.log('找到制造能力动画容器，初始化动画');
                        isGsapSlide = true;
                        initGSAP('manufacturing');
                    } else if (currentSlide.querySelector('#management-text')) {
                        console.log('找到管理团队动画容器，初始化动画');
                        isGsapSlide = true;
                        initGSAP('management');
                    } else if (currentSlide.querySelector('#industry-trend-stagger')) {
                        console.log('找到行业趋势动画容器，初始化动画');
                        isGsapSlide = true;
                        initGSAP('industry-trend');
                    } else {
                        console.log('未找到GSAP动画容器');
                        isGsapSlide = false;
                    }
                } catch (e) {
                    console.error('检查GSAP幻灯片时出错:', e);
                }
            }
            
            // 调整当前图表大小
            function resizeCurrentChart() {
                try {
                    if (!currentEChartsType) return;
                    
                    console.log('调整图表大小:', currentEChartsType);
                    
                    // 根据当前图表类型调整大小
                    switch (currentEChartsType) {
                        case 'revenue-profit':
                            if (revenueProfitChart) revenueProfitChart.resize();
                            break;
                        case 'gross-margin':
                            if (grossMarginChart) grossMarginChart.resize();
                            break;
                        case 'business-structure':
                            if (businessPieChart) businessPieChart.resize();
                            break;
                        case 'roe':
                            if (roeChart) roeChart.resize();
                            break;
                        case 'asset-liability':
                            if (assetLiabilityChart) assetLiabilityChart.resize();
                            break;
                        case 'risk-analysis':
                            if (riskAnalysisChart) riskAnalysisChart.resize();
                            break;
                        case 'competitors-radar':
                            if (competitorsRadarChart) competitorsRadarChart.resize();
                            break;
                        case 'quarterly-data':
                            if (quarterlyDataChart) quarterlyDataChart.resize();
                            break;
                        case 'cost-structure':
                            if (costStructureChart) costStructureChart.resize();
                            break;
                        case 'shareholder-structure':
                            if (shareholderStructurePieChart) shareholderStructurePieChart.resize();
                            break;
                        case 'shareholder-concentration':
                            if (shareholderConcentrationBarChart) shareholderConcentrationBarChart.resize();
                            break;
                        case 'stock-price':
                            if (stockPriceLineChart) stockPriceLineChart.resize();
                            break;
                        case 'stock-performance':
                            if (stockPerformanceRelationChart) stockPerformanceRelationChart.resize();
                            break;
                        case 'valuation-indicators':
                            if (valuationIndicatorsChart) valuationIndicatorsChart.resize();
                            break;
                        case 'margin-decline':
                            if (marginDeclineChart) marginDeclineChart.resize();
                            break;
                        default:
                            console.warn('未知的图表类型:', currentEChartsType);
                    }
                } catch (e) {
                    console.error('调整图表大小出错:', e);
                }
            }
            
            // 修改resize事件处理函数
            window.addEventListener('resize', function() {
                // Three.js部分
                if (camera && renderer) {
                    const container = document.getElementById(currentThreeJsCanvas + '-canvas');
                    if (container) {
                        camera.aspect = container.clientWidth / container.clientHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(container.clientWidth, container.clientHeight);
                    }
                }
                
                // ECharts部分 - 根据当前图表类型调整大小
                resizeCurrentChart();
            });
            
            // ========== Three.js 初始化函数 ==========
            
            // 初始化歌尔股份Logo (3D文字)
            function initGoelLogo() {
                const container = document.getElementById('goel-logo-canvas');
                if (!container) return;
                
                // 创建场景
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x1a1a1a);
                
                // 创建相机
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                
                // 创建渲染器
                renderer = new THREE.WebGLRenderer({
                    canvas: container,
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);
                
                // 添加灯光
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // 创建文字
                const loader = new THREE.FontLoader();
                // 使用系统默认字体（由于加载自定义字体可能受限）
                createTextMesh("歌尔股份", 0x1a73e8);
                
                // 隐藏加载文本
                document.getElementById('logo-loading-text').style.display = 'none';
                
                // 开始动画
                animateThreeJs();
            }
            
            // 创建3D文字网格
            function createTextMesh(text, color) {
                // 创建一个临时的立方体代替文字
                const geometry = new THREE.BoxGeometry(4, 1, 0.5);
                const materials = new THREE.MeshPhongMaterial({ 
                    color: color,
                    specular: 0x555555,
                    shininess: 30
                });
                logoMesh = new THREE.Mesh(geometry, materials);
                scene.add(logoMesh);
                
                // 添加简单的公司标识
                const sphereGeometry = new THREE.SphereGeometry(0.3, 32, 32);
                const sphereMaterial = new THREE.MeshPhongMaterial({ color: 0x3498db });
                const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
                sphere.position.set(-1.5, 0, 0.5);
                scene.add(sphere);
            }
            
            // 初始化市场地位3D模型
            function initMarketPosition() {
                const container = document.getElementById('market-position-canvas');
                if (!container) return;
                
                // 基本场景设置与Logo相似，但模型不同
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x1a1a1a);
                
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                
                renderer = new THREE.WebGLRenderer({
                    canvas: container,
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);
                
                // 添加灯光
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // 创建市场地位可视化 - 使用柱状图形式
                createMarketPositionVisualization();
                
                // 隐藏加载文本
                document.getElementById('market-loading-text').style.display = 'none';
                
                // 开始动画
                animateThreeJs();
            }
            
            // 创建市场地位可视化
            function createMarketPositionVisualization() {
                const marketData = [
                    { name: "VR/AR", height: 2.0, color: 0x3498db },
                    { name: "TWS耳机", height: 1.8, color: 0x2ecc71 },
                    { name: "智能穿戴", height: 1.5, color: 0xe74c3c },
                    { name: "其他", height: 1.0, color: 0xf39c12 }
                ];
                
                const group = new THREE.Group();
                
                // 创建柱状体
                let xPos = -3;
                const spacing = 2;
                
                marketData.forEach(item => {
                    const geometry = new THREE.BoxGeometry(1, item.height, 1);
                    const material = new THREE.MeshPhongMaterial({ color: item.color });
                    const bar = new THREE.Mesh(geometry, material);
                    bar.position.set(xPos, item.height/2 - 1, 0);
                    group.add(bar);
                    xPos += spacing;
                });
                
                marketMesh = group;
                scene.add(marketMesh);
            }
            
            // 初始化客户关系3D模型
            function initClientRelationship() {
                const container = document.getElementById('client-relationship-canvas');
                if (!container) return;
                
                // 基本场景设置
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x1a1a1a);
                
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                
                renderer = new THREE.WebGLRenderer({
                    canvas: container,
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);
                
                // 添加灯光
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // 创建客户关系网络可视化
                createClientRelationshipVisualization();
                
                // 隐藏加载文本
                document.getElementById('client-loading-text').style.display = 'none';
                
                // 开始动画
                animateThreeJs();
            }
            
            // 创建客户关系网络可视化
            function createClientRelationshipVisualization() {
                // 创建中心节点（歌尔股份）
                const centerGeometry = new THREE.SphereGeometry(0.8, 32, 32);
                const centerMaterial = new THREE.MeshPhongMaterial({ color: 0x3498db });
                const centerNode = new THREE.Mesh(centerGeometry, centerMaterial);
                
                // 创建客户节点
                const clientsData = [
                    { name: "客户A", size: 0.6, color: 0xe74c3c, position: { x: 2.5, y: 1.5, z: 0 } },
                    { name: "客户B", size: 0.5, color: 0x2ecc71, position: { x: 2.5, y: -1.5, z: 0 } },
                    { name: "客户C", size: 0.4, color: 0xf39c12, position: { x: -2.5, y: 1.5, z: 0 } },
                    { name: "客户D", size: 0.3, color: 0x9b59b6, position: { x: -2.5, y: -1.5, z: 0 } }
                ];
                 
                const group = new THREE.Group();
                group.add(centerNode);
                
                // 添加客户节点
                clientsData.forEach(client => {
                    const clientGeometry = new THREE.SphereGeometry(client.size, 32, 32);
                    const clientMaterial = new THREE.MeshPhongMaterial({ color: client.color });
                    const clientNode = new THREE.Mesh(clientGeometry, clientMaterial);
                    clientNode.position.set(client.position.x, client.position.y, client.position.z);
                    
                    // 创建连接线
                    const lineMaterial = new THREE.LineBasicMaterial({ color: 0xffffff, opacity: 0.7, transparent: true });
                    const lineGeometry = new THREE.BufferGeometry().setFromPoints([
                        new THREE.Vector3(0, 0, 0),
                        new THREE.Vector3(client.position.x, client.position.y, client.position.z)
                    ]);
                    const line = new THREE.Line(lineGeometry, lineMaterial);
                    
                    group.add(clientNode);
                    group.add(line);
                });
                
                clientMesh = group;
                scene.add(clientMesh);
            }
            
            // 初始化未来战略3D可视化
            function initFutureStrategy() {
                const container = document.getElementById('future-strategy-canvas');
                if (!container) return;
                
                // 基本场景设置
                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x1a1a1a);
                
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                
                renderer = new THREE.WebGLRenderer({
                    canvas: container,
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);
                
                // 添加灯光
                const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
                scene.add(ambientLight);
                
                const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
                directionalLight.position.set(1, 1, 1);
                scene.add(directionalLight);
                
                // 创建未来战略路径可视化
                createFutureStrategyVisualization();
                
                // 隐藏加载文本
                document.getElementById('future-loading-text').style.display = 'none';
                
                // 开始动画
                animateThreeJs();
            }
            
            // 创建未来战略路径可视化
            function createFutureStrategyVisualization() {
                // 创建一条3D路径
                const curve = new THREE.CatmullRomCurve3([
                    new THREE.Vector3(-3, -2, 0),
                    new THREE.Vector3(-1, -1, 0),
                    new THREE.Vector3(0, 0, 0),
                    new THREE.Vector3(1, 1, 0),
                    new THREE.Vector3(3, 2, 0)
                ]);
                
                const points = curve.getPoints(50);
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const material = new THREE.LineBasicMaterial({ color: 0x3498db, linewidth: 2 });
                const curveObject = new THREE.Line(geometry, material);
                
                // 创建路径上的里程碑节点
                const milestones = [
                    { position: new THREE.Vector3(-3, -2, 0), color: 0xe74c3c, size: 0.3 },
                    { position: new THREE.Vector3(-1, -1, 0), color: 0xf39c12, size: 0.3 },
                    { position: new THREE.Vector3(0, 0, 0), color: 0x2ecc71, size: 0.4 },
                    { position: new THREE.Vector3(1, 1, 0), color: 0x3498db, size: 0.3 },
                    { position: new THREE.Vector3(3, 2, 0), color: 0x9b59b6, size: 0.5 }
                ];
                
                const group = new THREE.Group();
                group.add(curveObject);
                
                milestones.forEach(milestone => {
                    const sphereGeometry = new THREE.SphereGeometry(milestone.size, 32, 32);
                    const sphereMaterial = new THREE.MeshPhongMaterial({ color: milestone.color });
                    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
                    sphere.position.copy(milestone.position);
                    group.add(sphere);
                });
                
                futureMesh = group;
                scene.add(futureMesh);
            }
            
            // Three.js动画循环
            function animateThreeJs() {
                if (!isThreeJsSlide) return;
                
                requestAnimationFrame(animateThreeJs);
                
                // 根据当前画布类型旋转不同的对象
                if (currentThreeJsCanvas === 'logo' && logoMesh) {
                    logoMesh.rotation.y += 0.01;
                } else if (currentThreeJsCanvas === 'market' && marketMesh) {
                    marketMesh.rotation.y += 0.01;
                } else if (currentThreeJsCanvas === 'client' && clientMesh) {
                    clientMesh.rotation.y += 0.005;
                } else if (currentThreeJsCanvas === 'future' && futureMesh) {
                    futureMesh.rotation.y += 0.005;
                }
                
                if (renderer && camera && scene) {
                    renderer.render(scene, camera);
                }
            }
            
            // 初始化业务结构饼图
            function initBusinessStructurePie() {
                const container = document.getElementById('business-structure-chart');
                if (!container) {
                    console.error('未找到业务结构饼图容器');
                    return;
                }
                
                try {
                    console.log('开始初始化业务结构饼图');
                    businessPieChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '2023年业务结构占比',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c}%'
                        },
                        legend: {
                            orient: 'horizontal',
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        series: [
                            {
                                name: '业务占比',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '50%'],
                                data: goelData.businessStructure,
                                emphasis: {
                                    itemStyle: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                },
                                label: {
                                    formatter: '{b}: {c}%'
                                },
                                color: ['#f9a825', '#66bb6a', '#42a5f5', '#ec407a']
                            }
                        ]
                    };
                    
                    businessPieChart.setOption(option);
                    console.log('业务结构饼图初始化完成');
                } catch (error) {
                    console.error('业务结构饼图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化营收与利润趋势折线图
            function initRevenueProfitLine() {
                const container = document.getElementById('revenue-profit-chart');
                if (!container) return;
                
                try {
                    revenueProfitChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '营业收入与净利润十年趋势(2014-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            }
                        },
                        legend: {
                            data: ['营业收入', '净利润'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '8%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: goelData.revenue.years,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: [
                            {
                                type: 'value',
                                name: '营业收入(亿元)',
                                position: 'left',
                                max: 1100,
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: 'rgba(255,255,255,0.1)'
                                    }
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: '#3498db'
                                    }
                                }
                            },
                            {
                                type: 'value',
                                name: '净利润(亿元)',
                                position: 'right',
                                max: 50,
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    show: false
                                },
                                axisLine: {
                                    lineStyle: {
                                        color: '#2ecc71'
                                    }
                                }
                            }
                        ],
                        series: [
                            {
                                name: '营业收入',
                                type: 'line',
                                yAxisIndex: 0,
                                data: goelData.revenue.values,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db'
                                },
                                itemStyle: {
                                    color: '#3498db'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' }
                                    ]
                                },
                                markArea: {
                                    itemStyle: {
                                        color: 'rgba(52, 152, 219, 0.2)'
                                    },
                                    data: [
                                        [{
                                            xAxis: '2021'
                                        }, {
                                            xAxis: '2022'
                                        }]
                                    ]
                                }
                            },
                            {
                                name: '净利润',
                                type: 'line',
                                yAxisIndex: 1,
                                data: goelData.profit.values,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#2ecc71'
                                },
                                itemStyle: {
                                    color: '#2ecc71'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                },
                                markArea: {
                                    itemStyle: {
                                        color: 'rgba(46, 204, 113, 0.2)'
                                    },
                                    data: [
                                        [{
                                            xAxis: '2019'
                                        }, {
                                            xAxis: '2021'
                                        }]
                                    ]
                                }
                            }
                        ]
                    };
                    
                    revenueProfitChart.setOption(option);
                } catch (error) {
                    console.error('营收与利润趋势图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化毛利率变化折线图
            function initGrossMarginLine() {
                const container = document.getElementById('gross-margin-chart');
                if (!container) return;
                
                try {
                    grossMarginChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '毛利率变化与同业对比(2014-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            formatter: '{b}<br />{a0}: {c0}%<br />{a1}: {c1}%'
                        },
                        legend: {
                            data: ['歌尔股份', '行业平均'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.grossMargin.years,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            min: 0,
                            max: 30,
                            axisLabel: {
                                formatter: '{value}%',
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '歌尔股份',
                                type: 'line',
                                data: goelData.grossMargin.goel,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db'
                                },
                                itemStyle: {
                                    color: '#3498db'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                },
                                markLine: {
                                    data: [
                                        {
                                            type: 'average',
                                            name: '平均值',
                                            lineStyle: {
                                                color: '#3498db',
                                                type: 'dashed'
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                name: '行业平均',
                                type: 'line',
                                data: goelData.grossMargin.industry,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#e74c3c',
                                    type: 'dashed'
                                },
                                itemStyle: {
                                    color: '#e74c3c'
                                }
                            }
                        ]
                    };
                    
                    grossMarginChart.setOption(option);
                } catch (error) {
                    console.error('毛利率变化图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化ROE历年变化折线图
            function initRoeLine() {
                const container = document.getElementById('roe-chart');
                if (!container) return;
                
                try {
                    roeChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: 'ROE历年变化与行业对比(2014-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            formatter: '{b}<br />{a0}: {c0}%<br />{a1}: {c1}%'
                        },
                        legend: {
                            data: ['歌尔股份', '行业平均'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.roe.years,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            min: 0,
                            max: 25,
                            axisLabel: {
                                formatter: '{value}%',
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '歌尔股份',
                                type: 'line',
                                data: goelData.roe.goel,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#2ecc71'
                                },
                                itemStyle: {
                                    color: '#2ecc71'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                },
                                markArea: {
                                    itemStyle: {
                                        color: 'rgba(46, 204, 113, 0.1)'
                                    },
                                    data: [
                                        [{
                                            xAxis: '2017'
                                        }, {
                                            xAxis: '2018'
                                        }],
                                        [{
                                            xAxis: '2019'
                                        }, {
                                            xAxis: '2020'
                                        }]
                                    ]
                                }
                            },
                            {
                                name: '行业平均',
                                type: 'line',
                                data: goelData.roe.industry,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db',
                                    type: 'dashed'
                                },
                                itemStyle: {
                                    color: '#3498db'
                                }
                            }
                        ]
                    };
                    
                    roeChart.setOption(option);
                } catch (error) {
                    console.error('ROE变化图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化资产负债结构饼图
            function initAssetLiabilityPie() {
                const container = document.getElementById('asset-liability-chart');
                if (!container) return;
                
                try {
                    assetLiabilityChart = echarts.init(container);
                    
                    const option = {
                        title: [
                            {
                                text: '资产结构',
                                left: '25%',
                                top: '5%',
                                textAlign: 'center',
                                textStyle: {
                                    color: '#fff'
                                },
                                subtext: '2023年',
                                subtextStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            },
                            {
                                text: '负债结构',
                                left: '75%',
                                top: '5%',
                                textAlign: 'center',
                                textStyle: {
                                    color: '#fff'
                                },
                                subtext: '2023年 (负债率57.25%)',
                                subtextStyle: {
                                    color: 'rgba(255,255,255,0.6)'
                                }
                            }
                        ],
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c}%'
                        },
                        legend: {
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            },
                            formatter: function(name) {
                                // 资产
                                let assetData = goelData.assetStructure.find(item => item.name === name);
                                if (assetData) {
                                    return `${name}: ${assetData.value.toFixed(2)}%`;
                                }
                                
                                // 负债
                                let liabData = goelData.liabilityStructure.find(item => item.name === name);
                                if (liabData) {
                                    return `${name}: ${liabData.value.toFixed(2)}%`;
                                }
                                
                                return name;
                            }
                        },
                        series: [
                            {
                                name: '资产结构',
                                type: 'pie',
                                radius: '50%',
                                center: ['25%', '50%'],
                                data: goelData.assetStructure,
                                label: {
                                    formatter: '{b}: {c}%',
                                    color: '#fff'
                                },
                                emphasis: {
                                    itemStyle: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                },
                                color: ['#3498db', '#2ecc71', '#9b59b6', '#f39c12', '#1abc9c', '#95a5a6']
                            },
                            {
                                name: '负债结构',
                                type: 'pie',
                                radius: '50%',
                                center: ['75%', '50%'],
                                data: goelData.liabilityStructure,
                                label: {
                                    formatter: '{b}: {c}%',
                                    color: '#fff'
                                },
                                emphasis: {
                                    itemStyle: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                },
                                color: ['#e74c3c', '#f39c12', '#1abc9c', '#3498db', '#9b59b6']
                            }
                        ]
                    };
                    
                    assetLiabilityChart.setOption(option);
                } catch (error) {
                    console.error('资产负债结构图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化GSAP动画
            function initGSAP(type) {
                console.log('初始化GSAP动画:', type);
                switch (type) {
                    case 'toc':
                        initTocAnimation();
                        break;
                    case 'manufacturing':
                        initManufacturingAnimation();
                        break;
                    case 'management':
                        initManagementTextAnimation();
                        break;
                    case 'industry-trend':
                        initIndustryTrendAnimation();
                        break;
                }
            }
            
            // 初始化目录动画
            function initTocAnimation() {
                const container = document.getElementById('toc-animation');
                if (!container) {
                    console.error('未找到目录动画容器');
                    return;
                }
                
                try {
                    console.log('开始初始化目录动画');
                    const elements = container.querySelectorAll('.gsap-timeline-element');
                    console.log('找到元素数量:', elements.length);
                    
                    // 设置初始状态为可见
                    gsap.set(elements, {
                        opacity: 1,
                        scale: 1,
                        x: 0
                    });
                    
                    // 创建悬停效果动画
                    elements.forEach(element => {
                        element.addEventListener('mouseenter', () => {
                            gsap.to(element, {
                                duration: 0.3,
                                scale: 1.1,
                                backgroundColor: "#00c6ff",
                                boxShadow: "0 0 20px rgba(0, 198, 255, 0.7)",
                                ease: "power2.out"
                            });
                        });
                        
                        element.addEventListener('mouseleave', () => {
                            gsap.to(element, {
                                duration: 0.3,
                                scale: 1,
                                backgroundColor: element.style.backgroundColor,
                                boxShadow: element.style.boxShadow,
                                ease: "power2.in"
                            });
                        });
                    });
                    
                    console.log('目录动画初始化完成');
                } catch (error) {
                    console.error('GSAP目录动画初始化失败:', error);
                }
            }
            
            // 初始化制造能力动画
            function initManufacturingAnimation() {
                const container = document.getElementById('manufacturing-animation');
                if (!container) return;
                
                try {
                    const boxes = container.querySelectorAll('.gsap-box');
                    
                    // 重置动画元素状态
                    gsap.set(boxes, {
                        scale: 0,
                        opacity: 0,
                        y: 50
                    });
                    
                    // 创建动画
                    manufacturingAnimation = gsap.timeline({repeat: -1, repeatDelay: 1})
                        .to(boxes, {
                            duration: 1, 
                            scale: 1, 
                            opacity: 1, 
                            y: 0, 
                            stagger: 0.2, 
                            ease: "back.out(1.7)"
                        })
                        .to(boxes, {
                            duration: 0.8, 
                            scale: 1.2, 
                            stagger: 0.2, 
                            ease: "power1.inOut",
                            yoyo: true,
                            repeat: 1
                        }, "+=0.5")
                        .to(boxes, {
                            duration: 0.8, 
                            scale: 0, 
                            opacity: 0, 
                            y: -50, 
                            stagger: 0.2, 
                            ease: "power1.in"
                        }, "+=1");
                } catch (error) {
                    console.error('制造能力动画初始化失败:', error);
                }
            }
            
            // 初始化管理团队文字动画
            function initManagementTextAnimation() {
                const container = document.getElementById('management-text');
                if (!container) return;
                
                try {
                    const texts = container.querySelectorAll('.gsap-text');
                    
                    // 重置文字状态
                    gsap.set(texts, {
                        opacity: 0,
                        y: 50
                    });
                    
                    // 创建动画
                    managementTextAnimation = gsap.timeline({repeat: -1, repeatDelay: 1})
                        .to(texts[0], {duration: 1, opacity: 1, y: 0, ease: "back.out(1.7)"})
                        .to(texts[0], {duration: 1, opacity: 0, y: -50, ease: "power1.in", delay: 1.5})
                        .to(texts[1], {duration: 1, opacity: 1, y: 0, ease: "back.out(1.7)"})
                        .to(texts[1], {duration: 1, opacity: 0, y: -50, ease: "power1.in", delay: 1.5});
                } catch (error) {
                    console.error('管理团队文字动画初始化失败:', error);
                }
            }
            
            // 初始化行业趋势动画
            function initIndustryTrendAnimation() {
                const container = document.getElementById('industry-trend-stagger');
                if (!container) return;
                
                try {
                    const boxes = container.querySelectorAll('.gsap-stagger-box');
                    
                    // 设置颜色样式
                    boxes.forEach((box, index) => {
                        const colors = ['#3498db', '#2ecc71', '#e74c3c', '#f39c12', '#9b59b6', '#1abc9c', '#34495e', '#d35400', '#27ae60'];
                        box.style.backgroundColor = colors[index % colors.length];
                    });
                    
                    // 重置状态
                    gsap.set(boxes, {
                        opacity: 0,
                        scale: 0,
                        rotation: -180
                    });
                    
                    // 创建动画
                    industryTrendAnimation = gsap.timeline({repeat: -1, repeatDelay: 1})
                        .to(boxes, {
                            duration: 1, 
                            opacity: 1, 
                            scale: 1, 
                            rotation: 0,
                            stagger: {
                                each: 0.1,
                                from: "center",
                                grid: "auto"
                            },
                            ease: "elastic.out(1, 0.3)"
                        })
                        .to(boxes, {
                            duration: 0.8, 
                            scale: 1.2, 
                            stagger: {
                                each: 0.1,
                                from: "center",
                                grid: "auto"
                            },
                            ease: "power1.inOut",
                            yoyo: true,
                            repeat: 1
                        }, "+=1")
                        .to(boxes, {
                            duration: 0.8, 
                            opacity: 0, 
                            scale: 0, 
                            stagger: {
                                each: 0.05,
                                from: "edges",
                                grid: "auto"
                            },
                            ease: "power1.in",
                            delay: 1
                        });
                } catch (error) {
                    console.error('行业趋势动画初始化失败:', error);
                }
            }
            
            // 初始化客户集中度柱状图
            function initCustomerConcentrationBar() {
                const container = document.getElementById('customer-chart');
                if (!container) return;
                
                try {
                    customerChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '客户集中度分析(2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            subtext: '前两大客户合计占比超过70%',
                            subtextStyle: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            formatter: '{b}: {c}%'
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '10%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.customerConcentration.names,
                            axisLabel: {
                                color: '#fff',
                                interval: 0,
                                rotate: 15
                            }
                        },
                        yAxis: {
                            type: 'value',
                            max: 50,
                            axisLabel: {
                                formatter: '{value}%',
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '占比',
                                type: 'bar',
                                data: goelData.customerConcentration.values,
                                itemStyle: {
                                    color: function(params) {
                                        // 改变颜色以展示风险等级
                                        const colorList = ['#e74c3c', '#f39c12', '#f1c40f', '#3498db'];
                                        return colorList[params.dataIndex];
                                    }
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: '{c}%',
                                    fontSize: 14,
                                    color: '#fff'
                                },
                                markLine: {
                                    silent: true,
                                    lineStyle: {
                                        color: '#e74c3c'
                                    },
                                    data: [{
                                        yAxis: 30,
                                        label: {
                                            formatter: '高风险警戒线',
                                            position: 'start'
                                        }
                                    }]
                                }
                            }
                        ]
                    };
                    
                    customerChart.setOption(option);
                } catch (error) {
                    console.error('客户集中度图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化研发投入柱状图
            function initRdInvestmentBar() {
                const container = document.getElementById('rd-investment-bar');
                if (!container) return;
                
                try {
                    rdInvestmentChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '研发投入变化趋势(2019-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross',
                                crossStyle: {
                                    color: '#999'
                                }
                            },
                            formatter: function(params) {
                                let year = params[0].name;
                                let amount = params[0].value;
                                let percentage = params[1].value;
                                return year + '<br/>' +
                                    '研发投入金额: ' + amount + '亿元<br/>' +
                                    '研发投入占比: ' + percentage + '%';
                            }
                        },
                        legend: {
                            data: ['研发投入金额', '研发投入占比'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: [
                            {
                                type: 'category',
                                data: goelData.rdInvestment.years,
                                axisPointer: {
                                    type: 'shadow'
                                },
                                axisLabel: {
                                    color: '#fff'
                                }
                            }
                        ],
                        yAxis: [
                            {
                                type: 'value',
                                name: '金额(亿元)',
                                position: 'left',
                                min: 0,
                                max: 60,
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: 'rgba(255,255,255,0.1)'
                                    }
                                }
                            },
                            {
                                type: 'value',
                                name: '占比(%)',
                                min: 0,
                                max: 10,
                                position: 'right',
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    show: false
                                }
                            }
                        ],
                        series: [
                            {
                                name: '研发投入金额',
                                type: 'bar',
                                data: goelData.rdInvestment.amount,
                                itemStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        {offset: 0, color: '#3498db'},
                                        {offset: 1, color: '#2980b9'}
                                    ])
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: '{c}亿',
                                    color: '#fff'
                                }
                            },
                            {
                                name: '研发投入占比',
                                type: 'line',
                                yAxisIndex: 1,
                                data: goelData.rdInvestment.percentage,
                                lineStyle: {
                                    width: 3,
                                    color: '#e74c3c'
                                },
                                itemStyle: {
                                    color: '#e74c3c'
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: '{c}%',
                                    color: '#fff'
                                }
                            }
                        ]
                    };
                    
                    rdInvestmentChart.setOption(option);
                } catch (error) {
                    console.error('研发投入图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化客户风险分析图
            function initCustomerRiskAnalysis() {
                const container = document.getElementById('customer-risk-analysis');
                if (!container) return;
                
                try {
                    customerRiskChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '客户依赖度变化趋势(2019-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            subtext: '高度依赖客户占比持续上升',
                            subtextStyle: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            formatter: function(params) {
                                let result = params[0].name + '<br/>';
                                let total = 0;
                                params.forEach(item => {
                                    result += item.seriesName + ': ' + item.value + '%<br/>';
                                    total += item.value;
                                });
                                result += '总计: ' + total + '%';
                                return result;
                            }
                        },
                        legend: {
                            data: goelData.customerRiskAnalysis.categories,
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.customerRiskAnalysis.years,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                formatter: '{value}%',
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: goelData.customerRiskAnalysis.categories[0],
                                type: 'bar',
                                stack: '总量',
                                emphasis: {
                                    focus: 'series'
                                },
                                data: goelData.customerRiskAnalysis.data[0],
                                itemStyle: {
                                    color: '#e74c3c',
                                    borderRadius: [8, 8, 0, 0]
                                },
                                label: {
                                    show: true,
                                    position: 'inside',
                                    formatter: function(params) {
                                        return params.value > 30 ? params.value + '%' : '';
                                    },
                                    color: '#fff'
                                }
                            },
                            {
                                name: goelData.customerRiskAnalysis.categories[1],
                                type: 'bar',
                                stack: '总量',
                                emphasis: {
                                    focus: 'series'
                                },
                                data: goelData.customerRiskAnalysis.data[1],
                                itemStyle: {
                                    color: '#f39c12'
                                },
                                label: {
                                    show: true,
                                    position: 'inside',
                                    formatter: function(params) {
                                        return params.value > 15 ? params.value + '%' : '';
                                    },
                                    color: '#fff'
                                }
                            },
                            {
                                name: goelData.customerRiskAnalysis.categories[2],
                                type: 'bar',
                                stack: '总量',
                                emphasis: {
                                    focus: 'series'
                                },
                                data: goelData.customerRiskAnalysis.data[2],
                                itemStyle: {
                                    color: '#2ecc71'
                                },
                                label: {
                                    show: true,
                                    position: 'inside',
                                    formatter: function(params) {
                                        return params.value > 10 ? params.value + '%' : '';
                                    },
                                    color: '#fff'
                                }
                            }
                        ]
                    };
                    
                    customerRiskChart.setOption(option);
                } catch (error) {
                    console.error('客户风险分析图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化毛利率下滑分析饼图
            function initMarginDeclineAnalysis() {
                const container = document.getElementById('margin-decline-analysis');
                if (!container) return;
                
                try {
                    marginDeclineChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '毛利率下滑因素分析',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            subtext: '业务结构变化是主要因素',
                            subtextStyle: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c}% ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            right: 10,
                            top: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            formatter: function(name) {
                                const data = goelData.marginDeclineFactors.find(item => item.name === name);
                                if (data) {
                                    return `${name}: ${data.value}%`;
                                }
                                return name;
                            }
                        },
                        series: [
                            {
                                name: '影响因素',
                                type: 'pie',
                                radius: ['40%', '70%'],
                                center: ['40%', '50%'],
                                avoidLabelOverlap: false,
                                itemStyle: {
                                    borderRadius: 10,
                                    borderColor: '#121212',
                                    borderWidth: 2
                                },
                                label: {
                                    show: false,
                                    position: 'center'
                                },
                                emphasis: {
                                    label: {
                                        show: true,
                                        fontSize: 22,
                                        fontWeight: 'bold',
                                        formatter: '{b}\n{c}%',
                                        color: '#fff'
                                    }
                                },
                                labelLine: {
                                    show: false
                                },
                                data: goelData.marginDeclineFactors,
                                color: ['#e74c3c', '#f39c12', '#3498db', '#9b59b6', '#1abc9c']
                            }
                        ]
                    };
                    
                    marginDeclineChart.setOption(option);
                } catch (error) {
                    console.error('毛利率下滑分析图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化业绩波动分析图
            function initPerformanceVolatility() {
                const container = document.getElementById('performance-volatility-chart');
                if (!container) return;
                
                try {
                    performanceVolatilityChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '业绩波动性分析 (2019=100)',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            subtext: '营收与利润波动性明显高于行业平均',
                            subtextStyle: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            },
                            formatter: function(params) {
                                let result = params[0].name + '<br/>';
                                params.forEach(item => {
                                    if (item.seriesName === '营业收入') {
                                        const growthRate = goelData.growthRate.revenue[goelData.performanceVolatility.years.indexOf(item.name)];
                                        result += `${item.marker}${item.seriesName}: ${item.value} (同比${growthRate >= 0 ? '+' : ''}${growthRate}%)<br/>`;
                                    } 
                                    else if (item.seriesName === '净利润') {
                                        const growthRate = goelData.growthRate.profit[goelData.performanceVolatility.years.indexOf(item.name)];
                                        result += `${item.marker}${item.seriesName}: ${item.value} (同比${growthRate >= 0 ? '+' : ''}${growthRate}%)<br/>`;
                                    }
                                    else {
                                        result += `${item.marker}${item.seriesName}: ${item.value}<br/>`;
                                    }
                                });
                                return result;
                            }
                        },
                        legend: {
                            data: ['营业收入', '净利润', '行业平均'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.performanceVolatility.years,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: '指数(2019=100)',
                            min: 0,
                            max: 500,
                            axisLabel: {
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '营业收入',
                                type: 'line',
                                data: goelData.performanceVolatility.revenue,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db'
                                },
                                itemStyle: {
                                    color: '#3498db'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                },
                                markArea: {
                                    itemStyle: {
                                        color: 'rgba(52, 152, 219, 0.2)'
                                    },
                                    data: [
                                        [{
                                            xAxis: '2021'
                                        }, {
                                            xAxis: '2022'
                                        }]
                                    ]
                                }
                            },
                            {
                                name: '净利润',
                                type: 'line',
                                data: goelData.performanceVolatility.profit,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#e74c3c'
                                },
                                itemStyle: {
                                    color: '#e74c3c'
                                },
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                },
                                markArea: {
                                    itemStyle: {
                                        color: 'rgba(231, 76, 60, 0.2)'
                                    },
                                    data: [
                                        [{
                                            xAxis: '2020'
                                        }, {
                                            xAxis: '2021'
                                        }]
                                    ]
                                }
                            },
                            {
                                name: '行业平均',
                                type: 'line',
                                data: goelData.performanceVolatility.industry,
                                smooth: true,
                                lineStyle: {
                                    width: 3,
                                    color: '#2ecc71',
                                    type: 'dashed'
                                },
                                itemStyle: {
                                    color: '#2ecc71'
                                },
                                areaStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        {
                                            offset: 0,
                                            color: 'rgba(46, 204, 113, 0.3)'
                                        },
                                        {
                                            offset: 1,
                                            color: 'rgba(46, 204, 113, 0)'
                                        }
                                    ])
                                }
                            }
                        ]
                    };
                    
                    performanceVolatilityChart.setOption(option);
                } catch (error) {
                    console.error('业绩波动分析图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }
            
            // 初始化未来预测图表
            function initFutureForecast() {
                const container = document.getElementById('future-forecast-chart');
                if (!container) return;
                
                try {
                    futureChart = echarts.init(container);
                    
                    // 计算同比变化率
                    const revenueChange = ((goelData.forecast2024.revenue - goelData.revenue.values[9]) / goelData.revenue.values[9] * 100).toFixed(2);
                    const profitChange = ((goelData.forecast2024.profit - goelData.profit.values[9]) / goelData.profit.values[9] * 100).toFixed(2);
                    const marginChange = (goelData.forecast2024.grossMargin - goelData.grossMargin.goel[9]).toFixed(2);
                    const roeChange = (goelData.forecast2024.roe - goelData.roe.goel[9]).toFixed(2);
                    
                    const option = {
                        title: {
                            text: '2024年预期指标',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            },
                            subtext: '净利润预计同比增长145%',
                            subtextStyle: {
                                color: 'rgba(255,255,255,0.7)'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            formatter: function(params) {
                                const indicator = params[0].name;
                                let year2023 = params[0].value;
                                let year2024 = params[1].value;
                                let result = indicator + '<br/>';
                                
                                result += params[0].marker + '2023年: ' + year2023 + '<br/>';
                                result += params[1].marker + '2024年(预测): ' + year2024 + '<br/>';
                                
                                // 添加同比变化
                                let change;
                                let changeText;
                                
                                if (indicator === '营业收入(亿元)') {
                                    change = revenueChange;
                                    changeText = change >= 0 ? `+${change}%` : `${change}%`;
                                } else if (indicator === '净利润(亿元)') {
                                    change = profitChange;
                                    changeText = change >= 0 ? `+${change}%` : `${change}%`;
                                } else if (indicator === '毛利率(%)') {
                                    change = marginChange;
                                    changeText = change >= 0 ? `+${change}个百分点` : `${change}个百分点`;
                                } else if (indicator === 'ROE(%)') {
                                    change = roeChange;
                                    changeText = change >= 0 ? `+${change}个百分点` : `${change}个百分点`;
                                }
                                
                                result += '同比变化: ' + changeText;
                                return result;
                            }
                        },
                        legend: {
                            data: ['2023年', '2024年(预测)'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '12%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: ['营业收入(亿元)', '净利润(亿元)', '毛利率(%)', 'ROE(%)'],
                            axisLabel: {
                                color: '#fff',
                                interval: 0,
                                rotate: 15
                            }
                        },
                        yAxis: {
                            type: 'value',
                            axisLabel: {
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255,255,255,0.1)'
                                }
                            }
                        },
                        series: [
                            {
                                name: '2023年',
                                type: 'bar',
                                data: [
                                    goelData.revenue.values[9], 
                                    goelData.profit.values[9], 
                                    goelData.grossMargin.goel[9], 
                                    goelData.roe.goel[9]
                                ],
                                itemStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        {offset: 0, color: '#3498db'},
                                        {offset: 1, color: '#2980b9'}
                                    ])
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    color: '#fff'
                                },
                                barGap: '30%'
                            },
                            {
                                name: '2024年(预测)',
                                type: 'bar',
                                data: [
                                    goelData.forecast2024.revenue, 
                                    goelData.forecast2024.profit, 
                                    goelData.forecast2024.grossMargin, 
                                    goelData.forecast2024.roe
                                ],
                                itemStyle: {
                                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                        {offset: 0, color: '#2ecc71'},
                                        {offset: 1, color: '#27ae60'}
                                    ])
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: function(params) {
                                        // 添加变化指示符
                                        let value = params.value;
                                        let indicator = '';
                                        
                                        if (params.name === '营业收入(亿元)') {
                                            indicator = revenueChange >= 0 ? '↑' : '↓';
                                        } else if (params.name === '净利润(亿元)') {
                                            indicator = profitChange >= 0 ? '↑' : '↓';
                                        } else if (params.name === '毛利率(%)') {
                                            indicator = marginChange >= 0 ? '↑' : '↓';
                                        } else if (params.name === 'ROE(%)') {
                                            indicator = roeChange >= 0 ? '↑' : '↓';
                                        }
                                        
                                        return value + ' ' + indicator;
                                    },
                                    color: '#fff'
                                }
                            }
                        ]
                    };
                    
                    futureChart.setOption(option);
                } catch (error) {
                    console.error('未来预测图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }

            function initBusinessStructurePieChart() {
                const chartDom = document.getElementById('business-structure-chart');
                if (!chartDom) return;
                
                const myChart = echarts.init(chartDom);
                
                const option = {
                    title: {
                        text: '业务结构分析',
                        left: 'center',
                        textStyle: {
                            color: '#fff',
                            fontSize: 16
                        }
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: '{a} <br/>{b}: {c}% ({d}%)'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 'left',
                        textStyle: {
                            color: '#fff'
                        },
                        formatter: function(name) {
                            // 找到对应的数据
                            const data = goelData.businessStructure.find(item => item.name === name);
                            if (data) {
                                return `${name}: ${data.value.toFixed(2)}%`;
                            }
                            return name;
                        }
                    },
                    series: [
                        {
                            name: '业务占比',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 10,
                                borderColor: '#121212',
                                borderWidth: 2
                            },
                            label: {
                                show: true,
                                position: 'outside',
                                formatter: '{b}: {c}%',
                                color: '#fff'
                            },
                            emphasis: {
                                label: {
                                    show: true,
                                    fontSize: 16,
                                    fontWeight: 'bold'
                                }
                            },
                            labelLine: {
                                show: true
                            },
                            data: goelData.businessStructure,
                            color: ['#f9a825', '#66bb6a', '#42a5f5', '#ec407a']
                        }
                    ]
                };

                myChart.setOption(option);
                
                // 保存图表实例以便在窗口调整大小时重绘
                window.addEventListener('resize', function() {
                    myChart.resize();
                });
            }

            // 初始化竞争对手对比雷达图
            function initCompetitorsRadarChart() {
                const container = document.getElementById('competitors-radar-chart');
                if (!container) return;
                
                try {
                    competitorsRadarChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '行业竞争对手关键指标分析',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'item'
                        },
                        legend: {
                            orient: 'horizontal',
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            },
                            data: goelData.competitors.companies
                        },
                        radar: {
                            indicator: [
                                { name: '营收规模(亿元)', max: 2000 },
                                { name: '净利润(亿元)', max: 70 },
                                { name: '毛利率(%)', max: 30 },
                                { name: '市盈率', max: 80 },
                                { name: '市净率', max: 5 }
                            ],
                            center: ['50%', '50%'],
                            radius: '60%',
                            axisName: {
                                color: '#fff'
                            },
                            splitLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, 0.2)'
                                }
                            },
                            splitArea: {
                                show: true,
                                areaStyle: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                }
                            },
                            axisLine: {
                                lineStyle: {
                                    color: 'rgba(255, 255, 255, 0.3)'
                                }
                            }
                        },
                        series: [{
                            type: 'radar',
                            data: [
                                {
                                    value: [
                                        goelData.competitors.revenue[0], 
                                        goelData.competitors.profit[0], 
                                        goelData.competitors.grossMargin[0], 
                                        goelData.competitors.pe[0], 
                                        goelData.competitors.pb[0]
                                    ],
                                    name: goelData.competitors.companies[0],
                                    lineStyle: {
                                        color: '#f39c12',
                                        width: 2
                                    },
                                    areaStyle: {
                                        color: 'rgba(243, 156, 18, 0.2)'
                                    }
                                },
                                {
                                    value: [
                                        goelData.competitors.revenue[1], 
                                        goelData.competitors.profit[1], 
                                        goelData.competitors.grossMargin[1], 
                                        goelData.competitors.pe[1], 
                                        goelData.competitors.pb[1]
                                    ],
                                    name: goelData.competitors.companies[1],
                                    lineStyle: {
                                        color: '#3498db',
                                        width: 2
                                    },
                                    areaStyle: {
                                        color: 'rgba(52, 152, 219, 0.2)'
                                    }
                                },
                                {
                                    value: [
                                        goelData.competitors.revenue[2], 
                                        goelData.competitors.profit[2], 
                                        goelData.competitors.grossMargin[2], 
                                        goelData.competitors.pe[2], 
                                        goelData.competitors.pb[2]
                                    ],
                                    name: goelData.competitors.companies[2],
                                    lineStyle: {
                                        color: '#2ecc71',
                                        width: 2
                                    },
                                    areaStyle: {
                                        color: 'rgba(46, 204, 113, 0.2)'
                                    }
                                },
                                {
                                    value: [
                                        goelData.competitors.revenue[3], 
                                        goelData.competitors.profit[3], 
                                        goelData.competitors.grossMargin[3], 
                                        goelData.competitors.pe[3], 
                                        goelData.competitors.pb[3]
                                    ],
                                    name: goelData.competitors.companies[3],
                                    lineStyle: {
                                        color: '#9b59b6',
                                        width: 2
                                    },
                                    areaStyle: {
                                        color: 'rgba(155, 89, 182, 0.2)'
                                    }
                                }
                            ]
                        }]
                    };
                    
                    competitorsRadarChart.setOption(option);
                } catch (error) {
                    console.error('竞争对手雷达图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }

            // 初始化季度数据图表
            function initQuarterlyDataChart() {
                const container = document.getElementById('quarterly-data-chart');
                if (!container) return;
                
                try {
                    quarterlyDataChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '2023年季度营收、利润与现金流',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        legend: {
                            data: ['营收', '净利润', '经营现金流'],
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.quarterlyData.quarters,
                            axisLabel: {
                                color: '#fff'
                            }
                        },
                        yAxis: [
                            {
                                type: 'value',
                                name: '营收（亿元）',
                                min: 0,
                                max: 300,
                                position: 'left',
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    lineStyle: {
                                        color: 'rgba(255,255,255,0.1)'
                                    }
                                }
                            },
                            {
                                type: 'value',
                                name: '利润/现金流（亿元）',
                                min: 0,
                                max: 50,
                                position: 'right',
                                axisLabel: {
                                    formatter: '{value}',
                                    color: '#fff'
                                },
                                splitLine: {
                                    show: false
                                }
                            }
                        ],
                        series: [
                            {
                                name: '营收',
                                type: 'bar',
                                yAxisIndex: 0,
                                data: goelData.quarterlyData.revenue,
                                barWidth: '25%',
                                itemStyle: {
                                    color: '#3498db'
                                }
                            },
                            {
                                name: '净利润',
                                type: 'line',
                                yAxisIndex: 1,
                                data: goelData.quarterlyData.profit,
                                lineStyle: {
                                    width: 3,
                                    color: '#2ecc71'
                                },
                                itemStyle: {
                                    color: '#2ecc71'
                                },
                                symbol: 'circle',
                                symbolSize: 8
                            },
                            {
                                name: '经营现金流',
                                type: 'line',
                                yAxisIndex: 1,
                                data: goelData.quarterlyData.cashflow,
                                lineStyle: {
                                    width: 3,
                                    color: '#e67e22',
                                    type: 'dotted'
                                },
                                itemStyle: {
                                    color: '#e67e22'
                                },
                                symbol: 'triangle',
                                symbolSize: 8
                            }
                        ]
                    };
                    
                    quarterlyDataChart.setOption(option);
                } catch (error) {
                    console.error('季度数据图表初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }

            // 初始化成本结构饼图
            function initCostStructurePie() {
                const container = document.getElementById('cost-structure-pie');
                if (!container) return;
                
                try {
                    costStructureChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '2023年成本结构分析',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c}%'
                        },
                        legend: {
                            orient: 'horizontal',
                            bottom: 10,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        series: [
                            {
                                name: '成本占比',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '50%'],
                                data: goelData.costStructure,
                                emphasis: {
                                    itemStyle: {
                                        shadowBlur: 10,
                                        shadowOffsetX: 0,
                                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                                    }
                                },
                                label: {
                                    formatter: '{b}: {c}%',
                                    color: '#fff'
                                },
                                color: ['#e74c3c', '#9b59b6', '#3498db']
                            }
                        ]
                    };
                    
                    costStructureChart.setOption(option);
                } catch (error) {
                    console.error('成本结构饼图初始化失败:', error);
                    container.innerHTML = '<div style="text-align:center;padding-top:100px;color:red;">图表加载失败</div>';
                }
            }

            // 初始化股东结构分析饼图
            function initShareholderStructurePie() {
                try {
                    const container = document.getElementById('shareholder-structure-chart');
                    if (!container) {
                        console.error('找不到股东结构图容器: shareholder-structure-chart');
                        return;
                    }
                    
                    console.log('正在初始化股东结构饼图...');
                    shareholderStructurePieChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '股东结构分布',
                            left: 'center',
                            textStyle: {
                                color: '#eee'
                            }
                        },
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            left: 10,
                            top: 'center',
                            textStyle: {
                                color: '#eee'
                            },
                            data: goelData.shareholderStructure.names
                        },
                        series: [
                            {
                                name: '持股比例',
                                type: 'pie',
                                radius: ['50%', '70%'],
                                avoidLabelOverlap: false,
                                label: {
                                    show: false,
                                    position: 'center'
                                },
                                emphasis: {
                                    label: {
                                        show: true,
                                        fontSize: '18',
                                        fontWeight: 'bold'
                                    }
                                },
                                labelLine: {
                                    show: false
                                },
                                data: goelData.shareholderStructure.names.map((name, index) => {
                                    return {
                                        name: name,
                                        value: goelData.shareholderStructure.values[index]
                                    };
                                })
                            }
                        ],
                        color: ['#f39c12', '#e74c3c', '#3498db', '#2ecc71', '#9b59b6', '#1abc9c', '#34495e', '#fd79a8']
                    };
                    
                    shareholderStructurePieChart.setOption(option);
                    currentEChartsType = 'shareholder-structure';
                    console.log('股东结构饼图初始化成功');
                    
                } catch (error) {
                    console.error('初始化股东结构饼图失败:', error);
                    if (document.getElementById('shareholder-structure-chart')) {
                        document.getElementById('shareholder-structure-chart').innerHTML = '<div class="chart-error">图表加载失败</div>';
                    }
                }
            }

            // 初始化股权集中度条形图
            function initShareholderConcentrationBar() {
                try {
                    const container = document.getElementById('shareholder-concentration-chart');
                    if (!container) {
                        console.error('找不到股权集中度图容器: shareholder-concentration-chart');
                        return;
                    }
                    
                    console.log('正在初始化股权集中度条形图...');
                    shareholderConcentrationBarChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '主要股东持股比例',
                            left: 'center',
                            textStyle: {
                                color: '#eee'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.shareholderStructure.names,
                            axisLabel: {
                                color: '#eee'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: '持股比例 (%)',
                            max: 80,
                            axisLabel: {
                                color: '#eee',
                                formatter: '{value}%'
                            }
                        },
                        series: [
                            {
                                name: '持股比例',
                                type: 'bar',
                                data: goelData.shareholderStructure.values,
                                itemStyle: {
                                    color: function(params) {
                                        const colorList = [
                                            '#f39c12',  // 户健
                                            '#e74c3c',  // 姜滨
                                            '#3498db',  // 高瓴
                                            '#2ecc71',  // 其他机构
                                            '#9b59b6'   // 其他个人
                                        ];
                                        return colorList[params.dataIndex % colorList.length];
                                    }
                                },
                                label: {
                                    show: true,
                                    position: 'top',
                                    formatter: '{c}%'
                                },
                                markLine: {
                                    data: [
                                        {
                                            name: '控股阈值',
                                            yAxis: 30,
                                            lineStyle: {
                                                color: '#e74c3c'
                                            },
                                            label: {
                                                formatter: '控股阈值: 30%',
                                                position: 'middle'
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    };
                    
                    shareholderConcentrationBarChart.setOption(option);
                    currentEChartsType = 'shareholder-concentration';
                    console.log('股权集中度条形图初始化成功');
                    
                } catch (error) {
                    console.error('初始化股权集中度条形图失败:', error);
                    if (document.getElementById('shareholder-concentration-chart')) {
                        document.getElementById('shareholder-concentration-chart').innerHTML = '<div class="chart-error">图表加载失败</div>';
                    }
                }
            }

            // 初始化股价历年表现折线图
            function initStockPriceLine() {
                try {
                    const container = document.getElementById('stock-price-chart');
                    if (!container) {
                        console.error('找不到股价历年表现图容器: stock-price-chart');
                        return;
                    }
                    
                    console.log('正在初始化股价历年表现折线图...');
                    stockPriceLineChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '股价走势 (2014-2023)',
                            left: 'center',
                            textStyle: {
                                color: '#eee'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            formatter: function(params) {
                                const data = params[0].data;
                                return `${params[0].name}年<br/>
                                        年末: ${data[0]}元<br/>
                                        最高: ${data[1]}元<br/>
                                        最低: ${data[2]}元<br/>
                                        变化率: ${data[3]}%`;
                            }
                        },
                        legend: {
                            data: ['年末价格', '最高价', '最低价'],
                            textStyle: {
                                color: '#eee'
                            },
                            bottom: 0
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            top: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: goelData.stockPrice.years,
                            axisLabel: {
                                color: '#eee'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: '股价 (元)',
                            axisLabel: {
                                color: '#eee',
                                formatter: '{value}元'
                            }
                        },
                        series: [
                            {
                                name: '年末价格',
                                type: 'line',
                                data: goelData.stockPrice.years.map((year, index) => [
                                    goelData.stockPrice.yearEnd[index],
                                    goelData.stockPrice.highest[index],
                                    goelData.stockPrice.lowest[index],
                                    goelData.stockPrice.changeRate[index]
                                ]),
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db'
                                },
                                symbol: 'circle',
                                symbolSize: 8,
                                markPoint: {
                                    data: [
                                        { type: 'max', name: '最大值' },
                                        { type: 'min', name: '最小值' }
                                    ]
                                }
                            },
                            {
                                name: '最高价',
                                type: 'line',
                                data: goelData.stockPrice.highest,
                                lineStyle: {
                                    width: 2,
                                    color: '#2ecc71',
                                    type: 'dashed'
                                },
                                symbol: 'circle',
                                symbolSize: 6
                            },
                            {
                                name: '最低价',
                                type: 'line',
                                data: goelData.stockPrice.lowest,
                                lineStyle: {
                                    width: 2,
                                    color: '#e74c3c',
                                    type: 'dashed'
                                },
                                symbol: 'circle',
                                symbolSize: 6
                            }
                        ]
                    };
                    
                    stockPriceLineChart.setOption(option);
                    currentEChartsType = 'stock-price';
                    console.log('股价历年表现折线图初始化成功');
                    
                } catch (error) {
                    console.error('初始化股价历年表现折线图失败:', error);
                    if (document.getElementById('stock-price-chart')) {
                        document.getElementById('stock-price-chart').innerHTML = '<div class="chart-error">图表加载失败</div>';
                    }
                }
            }

            // 初始化股价与业绩关联分析折线图
            function initStockPerformanceRelation() {
                try {
                    const container = document.getElementById('stock-performance-chart');
                    if (!container) {
                        console.error('找不到股价与业绩关联分析图容器: stock-performance-chart');
                        return;
                    }
                    
                    console.log('正在初始化股价与业绩关联分析折线图...');
                    stockPerformanceRelationChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '股价与业绩关联分析',
                            left: 'center',
                            textStyle: {
                                color: '#eee'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'cross'
                            }
                        },
                        legend: {
                            data: ['股价变化率', '营收增长率', '利润增长率'],
                            textStyle: {
                                color: '#eee'
                            },
                            bottom: 0
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            boundaryGap: false,
                            data: goelData.stockPrice.years,
                            axisLabel: {
                                color: '#eee'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: '变化率 (%)',
                            axisLabel: {
                                color: '#eee',
                                formatter: '{value}%'
                            }
                        },
                        series: [
                            {
                                name: '股价变化率',
                                type: 'line',
                                data: goelData.stockPrice.changeRate,
                                lineStyle: {
                                    width: 3,
                                    color: '#3498db'
                                },
                                symbol: 'circle',
                                symbolSize: 8
                            },
                            {
                                name: '营收增长率',
                                type: 'line',
                                data: calculateGrowthRate(goelData.revenue.values),
                                lineStyle: {
                                    width: 2,
                                    color: '#2ecc71'
                                },
                                symbol: 'circle',
                                symbolSize: 6
                            },
                            {
                                name: '利润增长率',
                                type: 'line',
                                data: calculateGrowthRate(goelData.profit.values),
                                lineStyle: {
                                    width: 2,
                                    color: '#e74c3c'
                                },
                                symbol: 'circle',
                                symbolSize: 6
                            }
                        ]
                    };
                    
                    stockPerformanceRelationChart.setOption(option);
                    currentEChartsType = 'stock-performance';
                    console.log('股价与业绩关联分析折线图初始化成功');
                    
                } catch (error) {
                    console.error('初始化股价与业绩关联分析折线图失败:', error);
                    if (document.getElementById('stock-performance-chart')) {
                        document.getElementById('stock-performance-chart').innerHTML = '<div class="chart-error">图表加载失败</div>';
                    }
                }
            }

            // 计算增长率 - 辅助函数
            function calculateGrowthRate(data) {
                if (!Array.isArray(data)) {
                    console.error('calculateGrowthRate: 参数不是数组');
                    return [];
                }
                
                const growthRates = [];
                for (let i = 1; i < data.length; i++) {
                    const previous = data[i - 1];
                    const current = data[i];
                    if (previous && previous !== 0) {
                        const growthRate = ((current - previous) / Math.abs(previous)) * 100;
                        growthRates.push(parseFloat(growthRate.toFixed(2)));
                    } else {
                        growthRates.push(0);
                    }
                }
                // 为第一年添加0值或null，保持数组长度一致
                growthRates.unshift(null);
                return growthRates;
            }

            // 初始化市场估值指标分析条形图
            function initValuationIndicators() {
                try {
                    const container = document.getElementById('valuation-indicators-chart');
                    if (!container) {
                        console.error('找不到市场估值指标分析图容器: valuation-indicators-chart');
                        return;
                    }
                    
                    console.log('正在初始化市场估值指标分析条形图...');
                    valuationIndicatorsChart = echarts.init(container);
                    
                    const option = {
                        title: {
                            text: '市场估值指标分析',
                            left: 'center',
                            textStyle: {
                                color: '#eee'
                            }
                        },
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            formatter: function(params) {
                                const data = params[0];
                                return `${data.name}<br/>${data.seriesName}: ${data.value}<br/>预测: ${goelData.valuation.forecast[data.dataIndex]}<br/>行业: ${goelData.valuation.industry[data.dataIndex]}`;
                            }
                        },
                        legend: {
                            data: ['当前值', '预测值', '行业均值'],
                            textStyle: {
                                color: '#eee'
                            },
                            bottom: 0
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '15%',
                            top: '15%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: goelData.valuation.indicators,
                            axisLabel: {
                                color: '#eee'
                            }
                        },
                        yAxis: {
                            type: 'value',
                            name: '数值',
                            axisLabel: {
                                color: '#eee'
                            }
                        },
                        series: [
                            {
                                name: '当前值',
                                type: 'bar',
                                data: goelData.valuation.current,
                                itemStyle: {
                                    color: '#3498db'
                                },
                                label: {
                                    show: true,
                                    position: 'top'
                                }
                            },
                            {
                                name: '预测值',
                                type: 'bar',
                                data: goelData.valuation.forecast,
                                itemStyle: {
                                    color: '#2ecc71'
                                }
                            },
                            {
                                name: '行业均值',
                                type: 'bar',
                                data: goelData.valuation.industry,
                                itemStyle: {
                                    color: '#e74c3c'
                                }
                            }
                        ]
                    };
                    
                    valuationIndicatorsChart.setOption(option);
                    currentEChartsType = 'valuation-indicators';
                    console.log('市场估值指标分析条形图初始化成功');
                    
                } catch (error) {
                    console.error('初始化市场估值指标分析条形图失败:', error);
                    if (document.getElementById('valuation-indicators-chart')) {
                        document.getElementById('valuation-indicators-chart').innerHTML = '<div class="chart-error">图表加载失败</div>';
                    }
                }
            }

            // 初始化特定类型的ECharts图表
            function initECharts(type) {
                try {
                    console.log('初始化图表:', type);
                    
                    // 初始化对应类型的图表
                    switch (type) {
                        case 'revenue-profit':
                            initRevenueProfitLine();
                            break;
                        case 'gross-margin':
                            initGrossMarginLine();
                            break;
                        case 'business-structure':
                            initBusinessStructurePie();
                            break;
                        case 'roe':
                            initRoeLine();
                            break;
                        case 'asset-liability':
                            initAssetLiabilityPie();
                            break;
                        case 'risk-analysis':
                            initCustomerRiskAnalysis();
                            break;
                        case 'competitors-radar':
                            initCompetitorsRadarChart();
                            break;
                        case 'quarterly-data':
                            initQuarterlyDataChart();
                            break;
                        case 'cost-structure':
                            initCostStructurePie();
                            break;
                        case 'shareholder-structure':
                            initShareholderStructurePie();
                            break;
                        case 'shareholder-concentration':
                            initShareholderConcentrationBar();
                            break;
                        case 'stock-price':
                            initStockPriceLine();
                            break;
                        case 'stock-performance':
                            initStockPerformanceRelation();
                            break;
                        case 'valuation-indicators':
                            initValuationIndicators();
                            break;
                        case 'customer-concentration':
                            initCustomerConcentrationBar();
                            break;
                        case 'margin-decline':
                            initMarginDeclineAnalysis();
                            break;
                        case 'performance-volatility':
                            initPerformanceVolatility();
                            break;
                        case 'future-forecast':
                            initFutureForecast();
                            break;
                        default:
                            console.warn('未知的图表类型:', type);
                    }
                    
                    // 记录当前初始化的图表类型
                    currentEChartsType = type;
                } catch (e) {
                    console.error('初始化图表出错:', e);
                }
            }
		</script>

        <!-- 新增：标题页入场动画脚本 -->
        <script>
            Reveal.addEventListener( 'ready', function( event ) {
                // 确保这是首次加载（ready事件通常只触发一次，但以防万一）
                // 并且只针对第一个幻灯片（通常是标题页）
                // 我们通过检查目标元素的上下文来假设这是第一页
                const firstSlideSection = document.querySelector('.slides section[data-background-gradient]');
                
                // 检查是否找到了第一张幻灯片对应的元素
                if (firstSlideSection) {
                    const logoContainer = firstSlideSection.querySelector('.threejs-container');
                    const title = firstSlideSection.querySelector('.title-content h1');
                    const subtitle = firstSlideSection.querySelector('.title-content p small');

                    // 确保所有元素都存在
                    if (logoContainer && title && subtitle) {
                        // 创建GSAP时间线
                        const tl = gsap.timeline({ 
                            // 添加一个小的延迟，确保页面渲染稳定
                            delay: 0.2 
                        });

                        // 动画序列
                        tl.to(logoContainer, { 
                            opacity: 1,
                            duration: 0.8, 
                            ease: "power2.out" 
                        })
                        .to(title, { 
                            opacity: 1, 
                            y: 0, 
                            duration: 0.7, 
                            ease: "power2.out" 
                        }, "-=0.5") // 在上一个动画结束前0.5秒开始
                        .to(subtitle, { 
                            opacity: 1, 
                            duration: 0.5, 
                            ease: "power1.inOut" 
                        }, "-=0.3"); // 在上一个动画结束前0.3秒开始
                    } else {
                        console.warn('未能找到标题页动画所需的所有元素。');
                    }
                } else {
                     console.warn('未能找到具有 data-background-gradient 属性的第一张幻灯片。');
                }
            });
        </script>
	</body>
</html> 